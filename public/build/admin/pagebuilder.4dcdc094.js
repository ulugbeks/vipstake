/*! For license information please see pagebuilder.4dcdc094.js.LICENSE.txt */
(()=>{var e={91:function(e,t,n){var r,o,i;o=[n(755)],r=function(e){return e.createModule("ClassApplier",["WrappedSelection"],(function(e,t){var n=e.dom,r=n.DomPosition,o=n.arrayContains,i=e.util,a=i.forEach,s="span",c=i.isHostMethod(document,"createElementNS");function l(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function u(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function d(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function f(e,t){return"object"==typeof e.classList?e.classList.contains(t):d("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function h(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,r=n?e.className:e.getAttribute("class");r?d(r,t)||(r+=" "+t):r=t,n?e.className=r:e.setAttribute("class",r)}}var p=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var r="string"==typeof t.className,o=r?t.className:t.getAttribute("class");o=o.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),r?t.className=o:t.setAttribute("class",o)}}}();function v(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function g(e){return e&&e.split(/\s+/).sort().join(" ")}function m(e){return g(v(e))}function y(e,t){return m(e)==m(t)}function b(e,t){for(var n=t.split(/\s+/),r=0,o=n.length;r<o;++r)if(!f(e,u(n[r])))return!1;return!0}function S(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function E(e,t,n,r,o){var i=e.node,a=e.offset,s=i,c=a;i==r&&a>o&&++c,i!=t||a!=n&&a!=n+1||(s=r,c+=o-n),i==t&&a>n+1&&--c,e.node=s,e.offset=c}function w(e,t,n){e.node==t&&e.offset>n&&--e.offset}function C(e,t,r,o){-1==r&&(r=t.childNodes.length);var i=e.parentNode,s=n.getNodeIndex(e);a(o,(function(e){E(e,i,s,t,r)})),t.childNodes.length==r?t.appendChild(e):t.insertBefore(e,t.childNodes[r])}function N(e,t){var r=e.parentNode,o=n.getNodeIndex(e);a(t,(function(e){w(e,r,o)})),n.removeNode(e)}function R(e,t,n,r,o){for(var i,a=[];i=e.firstChild;)C(i,t,n++,o),a.push(i);return r&&N(e,o),a}function T(e,t){return R(e,e.parentNode,n.getNodeIndex(e),!0,t)}function k(e,t){var n=e.cloneRange();n.selectNodeContents(t);var r=n.intersection(e);return""!=(r?r.toString():"")}function x(e){for(var t,n=e.getNodes([3]),r=0;(t=n[r])&&!k(e,t);)++r;for(var o=n.length-1;(t=n[o])&&!k(e,t);)--o;return n.slice(r,o+1)}function A(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,r,o,i=0,a=e.attributes.length;i<a;++i)if("class"!=(o=(n=e.attributes[i]).name)){if(null===n!=(null===(r=t.attributes.getNamedItem(o))))return!1;if(n.specified!=r.specified)return!1;if(n.specified&&n.nodeValue!==r.nodeValue)return!1}return!0}function O(e,t){for(var n,r=0,i=e.attributes.length;r<i;++r)if(n=e.attributes[r].name,(!t||!o(t,n))&&e.attributes[r].specified&&"class"!=n)return!0;return!1}var _=n.getComputedStyleProperty,L="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||L(e.parentNode))};function P(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||L(e)&&!L(e.parentNode))}function I(e){return(L(e)||1!=e.nodeType&&L(e.parentNode))&&!P(e)}var B=/^inline(-block|-table)?$/i;function D(e){return e&&1==e.nodeType&&!B.test(_(e,"display"))}var q=/[^\r\n\t\f \u200B]/;function j(e){if(0==e.data.length)return!0;if(q.test(e.data))return!1;switch(_(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return D(e.previousSibling)||D(e.nextSibling)}function M(e){var t,n,o=[];for(t=0;n=e[t++];)o.push(new r(n.startContainer,n.startOffset),new r(n.endContainer,n.endOffset));return o}function W(e,t){for(var n,r,o,i=0,a=e.length;i<a;++i)n=e[i],r=t[2*i],o=t[2*i+1],n.setStartAndEnd(r.node,r.offset,o.node,o.offset)}function H(e,t){return n.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}function F(e,r,o,i){var a,s,c=0==o;if(n.isAncestorOf(r,e))return e;if(n.isCharacterDataNode(r)){var l=n.getNodeIndex(r);if(0==o)o=l;else{if(o!=r.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+o+" in "+r.data);o=l+1}r=r.parentNode}if(H(r,o)){a=r.cloneNode(!1),s=r.parentNode,a.id&&a.removeAttribute("id");for(var u,d=0;u=r.childNodes[o];)C(u,a,d++,i);return C(a,s,n.getNodeIndex(r)+1,i),r==e?a:F(e,s,n.getNodeIndex(a),i)}if(e!=r){a=r.parentNode;var f=n.getNodeIndex(r);return c||f++,F(e,a,f,i)}return e}function U(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&y(e,t)&&A(e,t)&&"inline"==_(e,"display")&&"inline"==_(t,"display")}function V(e){var t=e?"nextSibling":"previousSibling";return function(n,r){var o=n.parentNode,i=n[t];if(i){if(i&&3==i.nodeType)return i}else if(r&&(i=o[t])&&1==i.nodeType&&U(o,i)){var a=i[e?"firstChild":"lastChild"];if(a&&3==a.nodeType)return a}return null}}var z=V(!1),$=V(!0);function G(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}G.prototype={doMerge:function(e){var t=this.textNodes,r=t[0];if(t.length>1){var o,i=n.getNodeIndex(r),s=[],c=0;a(t,(function(l,u){o=l.parentNode,u>0&&(o.removeChild(l),o.hasChildNodes()||n.removeNode(o),e&&a(e,(function(e){e.node==l&&(e.node=r,e.offset+=c),e.node==o&&e.offset>i&&(--e.offset,e.offset==i+1&&u<t.length-1&&(e.node=r,e.offset=c))}))),s[u]=l.data,c+=l.data.length})),r.data=s.join("")}return r.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return a(this.textNodes,(function(t,n){e[n]="'"+t.data+"'"})),"[Merge("+e.join(",")+")]"}};var X=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],Y={};function K(e,t,n){var r,o,i,a,s=this;s.cssClass=s.className=e;var c=null,d={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,c=t.elementProperties,d=t.elementAttributes,o=0;a=X[o++];)t.hasOwnProperty(a)&&(s[a]=t[a]);r=t.normalize}else r=t;s.normalize=void 0===r||r,s.attrExceptions=[];var f=document.createElement(s.elementTagName);s.elementProperties=s.copyPropertiesToElement(c,f,!0),l(d,(function(e,t){s.attrExceptions.push(e),d[e]=""+t})),s.elementAttributes=d,s.elementSortedClassName=s.elementProperties.hasOwnProperty("className")?g(s.elementProperties.className+" "+e):e,s.applyToAnyTagName=!1;var h=typeof n;if("string"==h)"*"==n?s.applyToAnyTagName=!0:s.tagNames=u(n.toLowerCase()).split(/\s*,\s*/);else if("object"==h&&"number"==typeof n.length)for(s.tagNames=[],o=0,i=n.length;o<i;++o)"*"==n[o]?s.applyToAnyTagName=!0:s.tagNames.push(n[o].toLowerCase());else s.tagNames=[s.elementTagName]}function J(e,t,n){return new K(e,t,n)}K.prototype={elementTagName:s,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var r,o,i,a,s,c,l={};for(var u in e)if(e.hasOwnProperty(u))if(a=e[u],s=t[u],"className"==u)h(t,a),h(t,this.className),t[u]=g(t[u]),n&&(l[u]=a);else if("style"==u){for(r in o=s,n&&(l[u]=i={}),e[u])e[u].hasOwnProperty(r)&&(o[r]=a[r],n&&(i[r]=o[r]));this.attrExceptions.push(u)}else t[u]=a,n&&(l[u]=t[u],c=Y.hasOwnProperty(u)?Y[u]:u,this.attrExceptions.push(c));return n?l:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return o(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],(function(e){return t.appliesToElement(e)&&!e.hasChildNodes()}))},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&f(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||I(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&j(e)},postApply:function(e,t,n,r){var o,i,s=e[0],c=e[e.length-1],l=[],u=s,d=c,f=0,h=c.length;a(e,(function(e){(i=z(e,!r))?(o||(o=new G(i),l.push(o)),o.textNodes.push(e),e===s&&(u=o.textNodes[0],f=u.length),e===c&&(d=o.textNodes[0],h=o.getLength())):o=null}));var p=$(c,!r);if(p&&(o||(o=new G(c),l.push(o)),o.textNodes.push(p)),l.length){for(var v=0,g=l.length;v<g;++v)l[v].doMerge(n);t.setStartAndEnd(u,f,d,h)}},createContainer:function(e){var t=n.getDocument(e),r=c&&!n.isHtmlNamespace(e)&&e.namespaceURI?t.createElementNS(e.namespaceURI,this.elementTagName):t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,r,!1),this.copyAttributesToElement(this.elementAttributes,r),h(r,this.className),this.onElementCreate&&this.onElementCreate(r,this),r},elementHasProperties:function(e,t){var n=this;return l(t,(function(t,r){if("className"==t)return b(e,r);if("object"==typeof r){if(!n.elementHasProperties(e[t],r))return!1}else if(e[t]!==r)return!1}))},elementHasAttributes:function(e,t){return l(t,(function(t,n){if(e.getAttribute(t)!==n)return!1}))},applyToTextNode:function(e,t){if(S(e)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))h(n,this.className);else{var r=e.parentNode,o=this.createContainer(r);r.insertBefore(o,e),o.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&m(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!O(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],(function(e){return t.isEmptyContainer(e)})),r=[e],o=M(r);a(n,(function(e){N(e,o)})),W(r,o)},undoToTextNode:function(e,t,n,r){if(!t.containsNode(n)){var o=t.cloneRange();o.selectNode(n),o.isPointInRange(t.endContainer,t.endOffset)&&(F(n,t.endContainer,t.endOffset,r),t.setEndAfter(n)),o.isPointInRange(t.startContainer,t.startOffset)&&(n=F(n,t.startContainer,t.startOffset,r))}this.isRemovable(n)?T(n,r):p(n,this.className)},splitAncestorWithClass:function(e,t,n){var r=this.getSelfOrAncestorWithClass(e);r&&F(r,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?T(e,t):p(e,this.className)},applyToRange:function(e,t){var n=this,r=M((t=t||[])||[]);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e);var o=x(e);if(o.length){a(o,(function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,r)}));var i=o[o.length-1];e.setStartAndEnd(o[0],0,i,i.length),n.normalize&&n.postApply(o,e,r,!1),W(t,r)}var s=n.getEmptyElements(e);a(s,(function(e){h(e,n.className)}))},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var n=e.getSelection(t);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(e,t){var n=this,r=M(t=t||[]);e.splitBoundariesPreservingPositions(r),n.removeEmptyElements&&n.removeEmptyContainers(e,r);var o,i,s=x(e),c=s[s.length-1];if(s.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,r),n.splitAncestorWithClass(e.startContainer,e.startOffset,r);for(var l=0,u=s.length;l<u;++l)o=s[l],(i=n.getSelfOrAncestorWithClass(o))&&n.isModifiable(o)&&n.undoToAncestor(i,r);e.setStartAndEnd(s[0],0,c,c.length),n.normalize&&n.postApply(s,e,r,!0),W(t,r)}var d=n.getEmptyElements(e);a(d,(function(e){p(e,n.className)}))},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var n=e.getSelection(t),r=e.getSelection(t).getAllRanges();this.undoToRanges(r),n.setRanges(r)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,r=0;n=t[r++];)if(!this.isIgnorableWhiteSpaceNode(n)&&k(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var n=e.getSelection(t);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],(function(e){var r=n.getSelfOrAncestorWithClass(e);r&&!o(t,r)&&t.push(r)})),t},detach:function(){}},K.util={hasClass:f,addClass:h,removeClass:p,getClass:v,hasSameClasses:y,hasAllClasses:b,replaceWithOwnChildren:T,elementsHaveSameNonClassAttributes:A,elementHasNonClassAttributes:O,splitNodeAt:F,isEditableElement:L,isEditingHost:P,isEditable:I},e.CssClassApplier=e.ClassApplier=K,e.createClassApplier=J,i.createAliasForDeprecatedMethod(e,"createCssClassApplier","createClassApplier",t)})),e},void 0===(i="function"==typeof r?r.apply(t,o):r)||(e.exports=i)},755:function(e,t,n){var r,o;r=function(){var e="object",t="function",n="undefined",r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],o=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],i=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],a=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function s(n,r){var o=typeof n[r];return o==t||!(o!=e||!n[r])||"unknown"==o}function c(t,n){return!(typeof t[n]!=e||!t[n])}function l(e,t){return typeof e[t]!=n}function u(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}var d=u(s),f=u(c),h=u(l);function p(e){return e&&d(e,a)&&h(e,i)}function v(e){return c(e,"body")?e.body:e.getElementsByTagName("body")[0]}var g,m,y={},b=typeof window!=n&&typeof document!=n,S={isHostMethod:s,isHostObject:c,isHostProperty:l,areHostMethods:d,areHostObjects:f,areHostProperties:h,isTextRange:p,getBody:v,forEach:[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)t(e[n],n)}},E={version:"1.3.1",initialized:!1,isBrowser:b,supported:!0,util:S,features:{},modules:y,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==n||rangyAutoInitialize}};function w(e){typeof console!=n&&s(console,"log")&&console.log(e)}function C(e,t){b&&t?alert(e):w(e)}function N(e){E.initialized=!0,E.supported=!1,C("Rangy is not supported in this environment. Reason: "+e,E.config.alertOnFail)}function R(e){C("Rangy warning: "+e,E.config.alertOnWarn)}E.fail=N,E.warn=R,{}.hasOwnProperty?(S.extend=g=function(e,t,n){var r,o;for(var i in t)t.hasOwnProperty(i)&&(r=e[i],o=t[i],n&&null!==r&&"object"==typeof r&&null!==o&&"object"==typeof o&&g(r,o,!0),e[i]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},S.createOptions=function(e,t){var n={};return g(n,t),e&&g(n,e),n}):N("hasOwnProperty not supported"),b||N("Rangy can only run in a browser"),function(){var e;if(b){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;n<r;++n)t[n]=e[n];return t}),S.toArray=e}(),b&&(s(document,"addEventListener")?m=function(e,t,n){e.addEventListener(t,n,!1)}:s(document,"attachEvent")?m=function(e,t,n){e.attachEvent("on"+t,n)}:N("Document does not have required addEventListener or attachEvent method"),S.addListener=m);var T=[];function k(e){return e.message||e.description||String(e)}function x(){if(b&&!E.initialized){var e,t=!1,n=!1;s(document,"createRange")&&(e=document.createRange(),d(e,o)&&h(e,r)&&(t=!0));var i=v(document);if(i&&"body"==i.nodeName.toLowerCase())if(i&&s(i,"createTextRange")&&p(e=i.createTextRange())&&(n=!0),t||n){var a;for(var c in E.initialized=!0,E.features={implementsDomRange:t,implementsTextRange:n},y)(a=y[c])instanceof P&&a.init(a,E);for(var l=0,u=T.length;l<u;++l)try{T[l](E)}catch(e){w("Rangy init listener threw an exception. Continuing. Detail: "+k(e))}}else N("Neither Range nor TextRange are available");else N("No body element found")}}function A(e,t,n){n&&(e+=" in module "+n.name),E.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function O(e,t,n,r){e[t]=function(){return A(t,n,r),e[n].apply(e,S.toArray(arguments))}}S.deprecationNotice=A,S.createAliasForDeprecatedMethod=O,E.init=x,E.addInitListener=function(e){E.initialized?e(E):T.push(e)};var _=[];function L(e){e=e||window,x();for(var t=0,n=_.length;t<n;++t)_[t](e)}function P(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function I(e,t,n){var r=new P(e,t,(function(t){if(!t.initialized){t.initialized=!0;try{n(E,t),t.supported=!0}catch(t){w("Module '"+e+"' failed to load: "+k(t)),t.stack&&w(t.stack)}}}));return y[e]=r,r}function B(){}function D(){}E.addShimListener=function(e){_.push(e)},b&&(E.shim=E.createMissingNativeApi=L,O(E,"createMissingNativeApi","shim")),P.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,o=n.length;r<o;++r){if(t=n[r],!((e=y[t])&&e instanceof P))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){E.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){E.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},E.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=I(e,n,t);E.initialized&&E.supported&&r.init()},E.createCoreModule=function(e,t,n){I(e,t,n)},E.RangePrototype=B,E.rangePrototype=new B,E.selectionPrototype=new D,E.createCoreModule("DomUtil",[],(function(e,t){var n="undefined",r=e.util,o=r.getBody;r.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),r.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var i=document.createElement("div");r.areHostMethods(i,["insertBefore","appendChild","cloneNode"]||0)||t.fail("Incomplete Element implementation"),r.isHostProperty(i,"innerHTML")||t.fail("Element is missing innerHTML property");var a=document.createTextNode("test");r.areHostMethods(a,["splitText","deleteData","insertData","appendData","cloneNode"]||0)||t.fail("Incomplete Text Node implementation");var s=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function c(e){var t;return typeof e.namespaceURI==n||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function l(e){var t=e.parentNode;return 1==t.nodeType?t:null}function u(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function f(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(s(r,n))return n;return null}function h(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function p(e,t){return h(e,t,!0)}function v(e,t,n){for(var r,o=n?e:e.parentNode;o;){if((r=o.parentNode)===t)return o;o=r}return null}function g(e){var t=e.nodeType;return 3==t||4==t||8==t}function m(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function y(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function b(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),y(r,e),n)for(var o,i=0;o=n[i++];)o.node==e&&o.offset>t?(o.node=r,o.offset-=t):o.node==e.parentNode&&o.offset>u(e)&&++o.offset;return r}function S(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=n)return e.ownerDocument;if(typeof e.document!=n)return e.document;if(e.parentNode)return S(e.parentNode);throw t.createError("getDocument: no document found for node")}function E(e){var r=S(e);if(typeof r.defaultView!=n)return r.defaultView;if(typeof r.parentWindow!=n)return r.parentWindow;throw t.createError("Cannot get a window object for node")}function w(e){if(typeof e.contentDocument!=n)return e.contentDocument;if(typeof e.contentWindow!=n)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function C(e){if(typeof e.contentWindow!=n)return e.contentWindow;if(typeof e.contentDocument!=n)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function N(e){return e&&r.isHostMethod(e,"setTimeout")&&r.isHostObject(e,"document")}function R(e,t,n){var o;if(e?r.isHostProperty(e,"nodeType")?o=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?w(e):S(e):N(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function T(e){for(var t;t=e.parentNode;)e=t;return e}function k(e,n,r,o){var i,a,s,c,l;if(e==r)return n===o?0:n<o?-1:1;if(i=v(r,e,!0))return n<=u(i)?-1:1;if(i=v(e,r,!0))return u(i)<o?-1:1;if(!(a=f(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===a?a:v(e,a,!0))===(c=r===a?a:v(r,a,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=a.firstChild;l;){if(l===s)return-1;if(l===c)return 1;l=l.nextSibling}}var x,A=!1;function O(e){try{return e.parentNode,!1}catch(e){return!0}}function _(e){if(!e)return"[No node]";if(A&&O(e))return"[Broken node]";if(g(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+u(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function L(e){for(var t,n=S(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function P(e,t,n){var r=o(e),i=e.createElement("div");i.contentEditable=""+!!n,t&&(i.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(i,a):r.appendChild(i),i}function I(e){return e.parentNode.removeChild(e)}function B(e){this.root=e,this._next=e}function D(e){return new B(e)}function q(e,t){this.node=e,this.offset=t}function j(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",A=O(n),e.features.crashyTextNodes=A}(),typeof window.getComputedStyle!=n?x=function(e,t){return E(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=n?x=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),B.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},q.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+_(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},j.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},j.prototype.toString=function(){return this.message},e.dom={arrayContains:s,isHtmlNamespace:c,parentElement:l,getNodeIndex:u,getNodeLength:d,getCommonAncestor:f,isAncestorOf:h,isOrIsAncestorOf:p,getClosestAncestorIn:v,isCharacterDataNode:g,isTextOrCommentNode:m,insertAfter:y,splitDataNode:b,getDocument:S,getWindow:E,getIframeWindow:C,getIframeDocument:w,getBody:o,isWindow:N,getContentDocument:R,getRootContainer:T,comparePoints:k,isBrokenNode:O,inspectNode:_,getComputedStyleProperty:x,createTestElement:P,removeNode:I,fragmentFromNodeChildren:L,createIterator:D,DomPosition:q},e.DOMException=j})),E.createCoreModule("DomRange",["DomUtil"],(function(e,t){var n=e.dom,r=e.util,o=n.DomPosition,i=e.DOMException,a=n.isCharacterDataNode,s=n.getNodeIndex,c=n.isOrIsAncestorOf,l=n.getDocument,u=n.comparePoints,d=n.splitDataNode,f=n.getClosestAncestorIn,h=n.getNodeLength,p=n.arrayContains,v=n.getRootContainer,g=e.features.crashyTextNodes,m=n.removeNode;function y(e,t){return 3!=e.nodeType&&(c(e,t.startContainer)||c(e,t.endContainer))}function b(e){return e.document||l(e.startContainer)}function S(e){return v(e.startContainer)}function E(e){return new o(e.parentNode,s(e))}function w(e){return new o(e.parentNode,s(e)+1)}function C(e,t,r){var o=11==e.nodeType?e.firstChild:e;return a(t)?r==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==r?t:d(t,r)):r>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[r]),o}function N(e,t,n){if(K(e),K(t),b(t)!=b(e))throw new i("WRONG_DOCUMENT_ERR");var r=u(e.startContainer,e.startOffset,t.endContainer,t.endOffset),o=u(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?r<=0&&o>=0:r<0&&o>0}function R(e){for(var t,n,r,o=b(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(r=e.getSubtreeIterator(),n.appendChild(R(r)),r.detach()),10==n.nodeType)throw new i("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function T(e,t,r){var o,i,a,s;for(r=r||{stop:!1};a=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(a))return void(r.stop=!0);if(T(s=e.getSubtreeIterator(),t,r),s.detach(),r.stop)return}else for(o=n.createIterator(a);i=o.next();)if(!1===t(i))return void(r.stop=!0)}function k(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(k(t=e.getSubtreeIterator()),t.detach()):e.remove()}function x(e){for(var t,n,r=b(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(x(n)),n.detach()):e.remove(),10==t.nodeType)throw new i("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}function A(e,t,n){var r,o=!(!t||!t.length),i=!!n;o&&(r=new RegExp("^("+t.join("|")+")$"));var s=[];return T(new _(e,!1),(function(t){if((!o||r.test(t.nodeType))&&(!i||n(t))){var c=e.startContainer;if(t!=c||!a(c)||e.startOffset!=c.length){var l=e.endContainer;t==l&&a(l)&&0==e.endOffset||s.push(t)}}})),s}function O(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function _(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&a(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||a(this.sc)?f(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||a(this.ec)?f(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}_.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,a(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!a(n)||n!==this.sc&&n!==this.ec?n.parentNode&&m(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return y(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new me(b(this.range));var t=this._current,n=t,r=0,o=t,i=h(t);c(t,this.sc)&&(n=this.sc,r=this.so),c(t,this.ec)&&(o=this.ec,i=this.eo),ge(e,n,r,o,i)}return new _(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var L=[1,3,4,5,7,8,10],P=[2,9,11],I=[5,6,10,12],B=[1,3,4,5,7,8,10,11],D=[1,3,4,5,7,8];function q(e){return function(t,n){for(var r,o=n?t:t.parentNode;o;){if(r=o.nodeType,p(e,r))return o;o=o.parentNode}return null}}var j=q([9,11]),M=q(I),W=q([6,10,12]),H=q([1]);function F(e,t){if(W(e,t))throw new i("INVALID_NODE_TYPE_ERR")}function U(e,t){if(!p(t,e.nodeType))throw new i("INVALID_NODE_TYPE_ERR")}function V(e,t){if(t<0||t>(a(e)?e.length:e.childNodes.length))throw new i("INDEX_SIZE_ERR")}function z(e,t){if(j(e,!0)!==j(t,!0))throw new i("WRONG_DOCUMENT_ERR")}function $(e){if(M(e,!0))throw new i("NO_MODIFICATION_ALLOWED_ERR")}function G(e,t){if(!e)throw new i(t)}function X(e,t){return t<=(a(e)?e.length:e.childNodes.length)}function Y(e){return!!e.startContainer&&!!e.endContainer&&!(g&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&v(e.startContainer)==v(e.endContainer)&&X(e.startContainer,e.startOffset)&&X(e.endContainer,e.endOffset)}function K(e){if(!Y(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var J=document.createElement("style"),Q=!1;try{J.innerHTML="<b>x</b>",Q=3==J.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=Q;var Z=Q?function(e){var t=this.startContainer,r=l(t);if(!t)throw new i("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:a(t)&&(o=n.parentElement(t)),(o=null===o||"HTML"==o.nodeName&&n.isHtmlNamespace(l(o).documentElement)&&n.isHtmlNamespace(o)?r.createElement("body"):o.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(o)}:function(e){var t=b(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function ee(e,t){K(e);var n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,c=n===o;a(o)&&i>0&&i<o.length&&d(o,i,t),a(n)&&r>0&&r<n.length&&(n=d(n,r,t),c?(i-=r,o=n):o==n.parentNode&&i>=s(n)&&i++,r=0),e.setStartAndEnd(n,r,o,i)}function te(e){K(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var ne=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],re=0,oe=1,ie=2,ae=3,se=0,ce=1,le=2,ue=3;function de(e){e.START_TO_START=re,e.START_TO_END=oe,e.END_TO_END=ie,e.END_TO_START=ae,e.NODE_BEFORE=se,e.NODE_AFTER=ce,e.NODE_BEFORE_AND_AFTER=le,e.NODE_INSIDE=ue}function fe(e){de(e),de(e.prototype)}function he(e,t){return function(){K(this);var n,r=this.startContainer,o=this.startOffset,i=this.commonAncestorContainer,a=new _(this,!0);r!==i&&(r=(n=w(f(r,i,!0))).node,o=n.offset),T(a,$),a.reset();var s=e(a);return a.detach(),t(this,r,o,r,o),s}}function pe(t,n){function o(e,t){return function(n){U(n,L),U(v(n),P);var r=(e?E:w)(n);(t?i:c)(this,r.node,r.offset)}}function i(e,t,r){var o=e.endContainer,i=e.endOffset;t===e.startContainer&&r===e.startOffset||(v(t)==v(o)&&1!=u(t,r,o,i)||(o=t,i=r),n(e,t,r,o,i))}function c(e,t,r){var o=e.startContainer,i=e.startOffset;t===e.endContainer&&r===e.endOffset||(v(t)==v(o)&&-1!=u(t,r,o,i)||(o=t,i=r),n(e,o,i,t,r))}var l=function(){};l.prototype=e.rangePrototype,t.prototype=new l,r.extend(t.prototype,{setStart:function(e,t){F(e,!0),V(e,t),i(this,e,t)},setEnd:function(e,t){F(e,!0),V(e,t),c(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],r=e[1],o=t,i=r;switch(e.length){case 3:i=e[2];break;case 4:o=e[2],i=e[3]}F(t,!0),V(t,r),F(o,!0),V(o,i),n(this,t,r,o,i)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){K(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){F(e,!0),n(this,e,0,e,h(e))},selectNode:function(e){F(e,!1),U(e,L);var t=E(e),r=w(e);n(this,t.node,t.offset,r.node,r.offset)},extractContents:he(x,n),deleteContents:he(k,n),canSurroundContents:function(){K(this),$(this.startContainer),$(this.endContainer);var e=new _(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},splitBoundaries:function(){ee(this)},splitBoundariesPreservingPositions:function(e){ee(this,e)},normalizeBoundaries:function(){K(this);var e,t=this.startContainer,r=this.startOffset,o=this.endContainer,i=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,i=e.length,e.appendData(t.data),m(t))},l=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var a=e.length;if(r=n.length,e.insertData(0,n.data),m(n),t==o)i+=r,o=t;else if(o==e.parentNode){var c=s(e);i==c?(o=e,i=a):i>c&&i--}}},u=!0;if(a(o))i==o.length?c(o):0==i&&(e=o.previousSibling)&&e.nodeType==o.nodeType&&(i=e.length,t==o&&(u=!1),e.appendData(o.data),m(o),o=e);else{if(i>0){var d=o.childNodes[i-1];d&&a(d)&&c(d)}u=!this.collapsed}if(u){if(a(t))0==r?l(t):r==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(o==e&&(o=t,i+=t.length),t.appendData(e.data),m(e));else if(r<t.childNodes.length){var f=t.childNodes[r];f&&a(f)&&l(f)}}else t=o,r=i;n(this,t,r,o,i)},collapseToPoint:function(e,t){F(e,!0),V(e,t),this.setStartAndEnd(e,t)},parentElement:function(){return K(this),this.commonAncestorContainer?H(this.commonAncestorContainer,!0):null}}),fe(t)}function ve(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function ge(e,t,r,o,i){e.startContainer=t,e.startOffset=r,e.endContainer=o,e.endOffset=i,e.document=n.getDocument(t),ve(e)}function me(e){ge(this,e,0,e,0)}r.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,r,o,i;K(this),z(this.startContainer,t.startContainer);var a=e==ae||e==re?"start":"end",s=e==oe||e==re?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],o=t[s+"Container"],i=t[s+"Offset"],u(n,r,o,i)},insertNode:function(e){if(K(this),U(e,B),$(this.startContainer),c(e,this.startContainer))throw new i("HIERARCHY_REQUEST_ERR");var t=C(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(K(this),this.collapsed)return b(this).createDocumentFragment();if(this.startContainer===this.endContainer&&a(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=b(this).createDocumentFragment()).appendChild(e),t;var n=new _(this,!0);return e=R(n),n.detach(),e},canSurroundContents:function(){K(this),$(this.startContainer),$(this.endContainer);var e=new _(this,!0),t=e._first&&y(e._first,this)||e._last&&y(e._last,this);return e.detach(),!t},surroundContents:function(e){if(U(e,D),!this.canSurroundContents())throw new i("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);C(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){K(this);for(var e,t=new me(b(this)),n=ne.length;n--;)t[e=ne[n]]=this[e];return t},toString:function(){K(this);var e=this.startContainer;if(e===this.endContainer&&a(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new _(this,!0);return T(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},compareNode:function(e){K(this);var t=e.parentNode,n=s(e);if(!t)throw new i("NOT_FOUND_ERR");var r=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return r<0?o>0?le:se:o>0?ce:ue},comparePoint:function(e,t){return K(this),G(e,"HIERARCHY_REQUEST_ERR"),z(e,this.startContainer),u(e,t,this.startContainer,this.startOffset)<0?-1:u(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:Z,toHtml:function(){return te(this)},intersectsNode:function(e,t){if(K(this),v(e)!=S(this))return!1;var n=e.parentNode,r=s(e);if(!n)return!0;var o=u(n,r,this.endContainer,this.endOffset),i=u(n,r+1,this.startContainer,this.startOffset);return t?o<=0&&i>=0:o<0&&i>0},isPointInRange:function(e,t){return K(this),G(e,"HIERARCHY_REQUEST_ERR"),z(e,this.startContainer),u(e,t,this.startContainer,this.startOffset)>=0&&u(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return N(this,e,!1)},intersectsOrTouchesRange:function(e){return N(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=u(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=u(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==u(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==u(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new i("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==ue},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,h(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return K(this),A(this,e,t)},getDocument:function(){return b(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=b(this),o=e.createRange(r);t=t||n.getBody(r),o.selectNodeContents(t);var i=this.intersection(o),a=0,s=0;return i&&(o.setEnd(i.startContainer,i.startOffset),s=(a=o.toString().length)+i.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,o,i,a,s=[t],c=!1,l=!1;!l&&(r=s.pop());)if(3==r.nodeType)o=n+r.length,!c&&e.start>=n&&e.start<=o&&(this.setStart(r,e.start-n),c=!0),c&&e.end>=n&&e.end<=o&&(this.setEnd(r,e.end-n),l=!0),n=o;else for(i=(a=r.childNodes).length;i--;)s.push(a[i])},getName:function(){return"DomRange"},equals:function(e){return me.rangesEqual(this,e)},isValid:function(){return Y(this)},inspect:function(){return O(this)},detach:function(){}}),pe(me,ge),r.extend(me,{rangeProperties:ne,RangeIterator:_,copyComparisonConstants:fe,createPrototypeRange:pe,inspect:O,toHtml:te,getRangeDocument:b,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=me})),E.createCoreModule("WrappedRange",["DomRange"],(function(e,t){var n,r,o=e.dom,i=e.util,a=o.DomPosition,s=e.DomRange,c=o.getBody,l=o.getContentDocument,u=o.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var r,a,u=s.rangeProperties;function d(e){for(var t,n=u.length;n--;)e[t=u[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function f(e,t,n,r,o){var i=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=o,s=!e.equals(e.nativeRange);(i||a||s)&&(e.setEnd(r,o),e.setStart(t,n))}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,d(this)},s.createPrototypeRange(n,f),(r=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),d(this)},r.cloneContents=function(){return this.nativeRange.cloneContents()},r.surroundContents=function(e){this.nativeRange.surroundContents(e),d(this)},r.collapse=function(e){this.nativeRange.collapse(e),d(this)},r.cloneRange=function(){return new n(this.nativeRange.cloneRange())},r.refresh=function(){d(this)},r.toString=function(){return this.nativeRange.toString()};var h=document.createTextNode("test");c(document).appendChild(h);var p=document.createRange();p.setStart(h,0),p.setEnd(h,0);try{p.setStart(h,1),r.setStart=function(e,t){this.nativeRange.setStart(e,t),d(this)},r.setEnd=function(e,t){this.nativeRange.setEnd(e,t),d(this)},a=function(e){return function(t){this.nativeRange[e](t),d(this)}}}catch(e){r.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}d(this)},r.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}d(this)},a=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}d(this)}}}r.setStartBefore=a("setStartBefore","setEndBefore"),r.setStartAfter=a("setStartAfter","setEndAfter"),r.setEndBefore=a("setEndBefore","setStartBefore"),r.setEndAfter=a("setEndAfter","setStartAfter"),r.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},p.selectNodeContents(h),p.setEnd(h,3);var v=document.createRange();v.selectNodeContents(h),v.setEnd(h,4),v.setStart(h,2),-1==p.compareBoundaryPoints(p.START_TO_END,v)&&1==p.compareBoundaryPoints(p.END_TO_START,v)?r.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:r.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var g=document.createElement("div");g.innerHTML="123";var m=g.firstChild,y=c(document);y.appendChild(g),p.setStart(m,1),p.setEnd(m,2),p.deleteContents(),"13"==m.data&&(r.deleteContents=function(){this.nativeRange.deleteContents(),d(this)},r.extractContents=function(){var e=this.nativeRange.extractContents();return d(this),e}),y.removeChild(g),y=null,i.isHostMethod(p,"createContextualFragment")&&(r.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(h),r.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=l(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var d=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var i=n.parentElement(),a=r==i?r:o.getCommonAncestor(r,i);return a==t?a:o.getCommonAncestor(t,a)},f=function(e){return 0==e.compareEndPoints("StartToEnd",e)},h=function(e,t,n,r,i){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(o.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var l=new a(c.parentNode,o.getNodeIndex(c));return{boundaryPosition:l,nodeInfo:{nodeIndex:l.offset,containerElement:l.node}}}var d=o.getDocument(c).createElement("span");d.parentNode&&o.removeNode(d);for(var f,h,p,v,g,m=n?"StartToStart":"StartToEnd",y=i&&i.containerElement==c?i.nodeIndex:0,b=c.childNodes.length,S=b,E=S;E==b?c.appendChild(d):c.insertBefore(d,c.childNodes[E]),s.moveToElementText(d),0!=(f=s.compareEndPoints(m,e))&&y!=S;){if(-1==f){if(S==y+1)break;y=E}else S=S==y+1?y:E;E=Math.floor((y+S)/2),c.removeChild(d)}if(g=d.nextSibling,-1==f&&g&&u(g)){var w;if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(g.data)){var C=s.duplicate(),N=C.text.replace(/\r\n/g,"\r").length;for(w=C.moveStart("character",N);-1==(f=C.compareEndPoints("StartToEnd",C));)w++,C.moveStart("character",1)}else w=s.text.length;v=new a(g,w)}else h=(r||!n)&&d.previousSibling,v=(p=(r||n)&&d.nextSibling)&&u(p)?new a(p,0):h&&u(h)?new a(h,h.data.length):new a(c,o.getNodeIndex(d));return o.removeNode(d),{boundaryPosition:v,nodeInfo:{nodeIndex:E,containerElement:c}}},p=function(e,t){var n,r,i,a,s=e.offset,l=o.getDocument(e.node),d=c(l).createTextRange(),f=u(e.node);return f?r=(n=e.node).parentNode:(n=s<(a=e.node.childNodes).length?a[s]:null,r=e.node),(i=l.createElement("span")).innerHTML="&#feff;",n?r.insertBefore(i,n):r.appendChild(i),d.moveToElementText(i),d.collapse(!t),r.removeChild(i),f&&d[t?"moveStart":"moveEnd"]("character",s),d};(r=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=d(this.textRange);f(this.textRange)?t=e=h(this.textRange,r,!0,!0).boundaryPosition:(e=(n=h(this.textRange,r,!0,!1)).boundaryPosition,t=h(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var v=function(e){if(e.collapsed)return p(new a(e.startContainer,e.startOffset),!0);var t=p(new a(e.startContainer,e.startOffset),!0),n=p(new a(e.endContainer,e.endOffset),!1),r=c(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=v,r.prototype.toTextRange=function(){return v(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var g=Function("return this;")();void 0===g.Range&&(g.Range=r),e.createNativeRange=function(e){return e=l(e,t,"createNativeRange"),c(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=l(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=l(e,t,"createRangyRange"),new s(e)},i.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),i.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener((function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null}))})),E.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(e,t){e.config.checkSelectionRanges=!0;var n,r,o="boolean",i="number",a=e.dom,s=e.util,c=s.isHostMethod,l=e.DomRange,u=e.WrappedRange,d=e.DOMException,f=a.DomPosition,h=e.features,p="Control",v=a.getDocument,g=a.getBody,m=l.rangesEqual;function y(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function b(e,n){if(e){if(a.isWindow(e))return e;if(e instanceof K)return e.win;var r=a.getContentDocument(e,t,n);return a.getWindow(r)}return window}function S(e){return b(e,"getWinSelection").getSelection()}function E(e){return b(e,"getDocSelection").document.selection}function w(e){var t=!1;return e.anchorNode&&(t=1==a.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var C=c(window,"getSelection"),N=s.isHostObject(document,"selection");h.implementsWinGetSelection=C,h.implementsDocSelection=N;var R=N&&(!C||e.config.preferTextRange);if(R)n=E,e.isSelectionValid=function(e){var t=b(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||v(n.createRange().parentElement())==t};else{if(!C)return t.fail("Neither document.selection or window.getSelection() detected."),!1;n=S,e.isSelectionValid=function(){return!0}}e.getNativeSelection=n;var T=n();if(!T)return t.fail("Native selection was null (possibly issue 138?)"),!1;var k=e.createNativeRange(document),x=g(document),A=s.areHostProperties(T,["anchorNode","focusNode","anchorOffset","focusOffset"]);h.selectionHasAnchorAndFocus=A;var O=c(T,"extend");h.selectionHasExtend=O;var _=c(T,"setBaseAndExtent");h.selectionHasSetBaseAndExtent=_;var L=typeof T.rangeCount==i;h.selectionHasRangeCount=L;var P=!1,I=!0,B=O?function(t,n){var r=l.getRangeDocument(n),o=e.createRange(r);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(U(o)),t.extend(n.startContainer,n.startOffset)}:null;s.areHostMethods(T,["addRange","getRangeAt","removeAllRanges"])&&typeof T.rangeCount==i&&h.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,o=[],i=w(t),s=0;s<n;++s)o[s]=t.getRangeAt(s);var c=a.createTestElement(document,"",!1),l=c.appendChild(document.createTextNode("   ")),u=document.createRange();if(u.setStart(l,1),u.collapse(!0),t.removeAllRanges(),t.addRange(u),I=1==t.rangeCount,t.removeAllRanges(),!r){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)P=!1;else{var f=u.cloneRange();u.setStart(l,0),f.setEnd(l,3),f.setStart(l,2),t.addRange(u),t.addRange(f),P=2==t.rangeCount}}for(a.removeNode(c),t.removeAllRanges(),s=0;s<n;++s)0==s&&i?B?B(t,o[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[s])):t.addRange(o[s])}}(),h.selectionSupportsMultipleRanges=P,h.collapsedNonEditableSelectionsSupported=I;var D,q,j=!1;function M(e,t,n){var r=n?"end":"start",o=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function W(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function H(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0,F(e)}function F(e){e.type=0==e.rangeCount?"None":r(e)?"Caret":"Range"}function U(t){var n;return t instanceof l?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof u?n=t.nativeRange:h.implementsDomRange&&t instanceof a.getWindow(t.startContainer).Range&&(n=t),n}function V(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!a.isAncestorOf(e[0],e[t]))return!1;return!0}function z(e){var n=e.getNodes();if(!V(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function $(e){return!!e&&void 0!==e.text}function G(e,t){var n=new u(t);e._ranges=[n],M(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed,F(e)}function X(t){if(t._ranges.length=0,"None"==t.docSelection.type)H(t);else{var n=t.docSelection.createRange();if($(n))G(t,n);else{t.rangeCount=n.length;for(var r,o=v(n.item(0)),i=0;i<t.rangeCount;++i)(r=e.createRange(o)).selectNode(n.item(i)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,M(t,t._ranges[t.rangeCount-1],!1),F(t)}}}function Y(e,n){for(var r=e.docSelection.createRange(),o=z(n),i=v(r.item(0)),a=g(i).createControlRange(),s=0,c=r.length;s<c;++s)a.add(r.item(s));try{a.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),X(e)}function K(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function J(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0,F(e)}x&&c(x,"createControlRange")&&(D=x.createControlRange(),s.areHostProperties(D,["item","add"])&&(j=!0)),h.implementsControlRange=j,r=A?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},c(T,"getRangeAt")?q=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:A&&(q=function(t){var n=v(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),K.prototype=e.selectionPrototype;var Q=[];function Z(e,t){for(var n,r,o=Q.length;o--;)if(r=(n=Q[o]).selection,"deleteAll"==t)J(r);else if(n.win==e)return"delete"==t?(Q.splice(o,1),!0):r;return"deleteAll"==t&&(Q.length=0),null}var ee=function(e){if(e&&e instanceof K)return e.refresh(),e;var t=Z(e=b(e,"getNativeSelection")),r=n(e),o=N?E(e):null;return t?(t.nativeSelection=r,t.docSelection=o,t.refresh()):(t=new K(r,o,e),Q.push({win:e,selection:t})),t};e.getSelection=ee,s.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var te,ne=K.prototype;function re(e,n){for(var r,o=v(n[0].startContainer),i=g(o).createControlRange(),a=0,s=n.length;a<s;++a){r=z(n[a]);try{i.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}i.select(),X(e)}if(!R&&A&&s.areHostMethods(T,["removeAllRanges","addRange"])){ne.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),H(this)};var oe=function(e,t){B(e.nativeSelection,t),e.refresh()};ne.addRange=L?function(t,n){if(j&&N&&this.docSelection.type==p)Y(this,t);else if(y(n)&&O)oe(this,t);else{var o;P?o=this.rangeCount:(this.removeAllRanges(),o=0);var i=U(t).cloneRange();try{this.nativeSelection.addRange(i)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var a=q(this.nativeSelection,this.rangeCount-1);a&&!m(a,t)&&(t=new u(a))}this._ranges[this.rangeCount-1]=t,M(this,t,ie(this.nativeSelection)),this.isCollapsed=r(this),F(this)}else this.refresh()}}:function(e,t){y(t)&&O?oe(this,e):(this.nativeSelection.addRange(U(e)),this.refresh())},ne.setRanges=function(e){if(j&&N&&e.length>1)re(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(c(T,"empty")&&c(k,"select")&&j&&R))return t.fail("No means of selecting a Range or TextRange was found"),!1;ne.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=v(this.anchorNode);else if(this.docSelection.type==p){var t=this.docSelection.createRange();t.length&&(e=v(t.item(0)))}e&&(g(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}H(this)},ne.addRange=function(t){this.docSelection.type==p?Y(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,M(this,t,!1),F(this))},ne.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?re(this,e):t&&this.addRange(e[0])}}if(ne.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new d("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},R)te=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=g(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==p?X(t):$(n)?G(t,n):H(t)};else if(c(T,"getRangeAt")&&typeof T.rangeCount==i)te=function(t){if(j&&N&&t.docSelection.type==p)X(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,o=t.rangeCount;n<o;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));M(t,t._ranges[t.rangeCount-1],ie(t.nativeSelection)),t.isCollapsed=r(t),F(t)}else H(t)};else{if(!A||typeof T.isCollapsed!=o||typeof k.collapsed!=o||!h.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;te=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=q(n,0),e._ranges=[t],e.rangeCount=1,W(e),e.isCollapsed=r(e),F(e)):H(e)}}ne.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(te(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;o--;)if(!m(t[o],this._ranges[o]))return!0;return!1}};var ie,ae=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;r<o;++r)m(t,n[r])||e.addRange(n[r]);e.rangeCount||H(e)};function se(e,t){if(e.win.document!=v(t))throw new d("WRONG_DOCUMENT_ERR")}function ce(e,t){if(t<0||t>(a.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new d("INDEX_SIZE_ERR")}function le(t){return function(n,r){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(t?"Start":"End")](n,r):(o=e.createRange(this.win.document)).setStartAndEnd(n,r),this.setSingleRange(o,this.isBackward())}}function ue(e){var t=[],n=new f(e.anchorNode,e.anchorOffset),r=new f(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var i=0,a=e.rangeCount;i<a;++i)t[i]=l.inspect(e.getRangeAt(i));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}ne.removeRange=j&&N?function(e){if(this.docSelection.type==p){for(var t=this.docSelection.createRange(),n=z(e),r=v(t.item(0)),o=g(r).createControlRange(),i=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||i?o.add(t.item(a)):i=!0;o.select(),X(this)}else ae(this,e)}:function(e){ae(this,e)},!R&&A&&h.implementsDomRange?(ie=w,ne.isBackward=function(){return ie(this)}):ie=ne.isBackward=function(){return!1},ne.isBackwards=ne.isBackward,ne.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},ne.collapse=function(t,n){se(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},ne.collapseToStart=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ne.collapseToEnd=function(){if(!this.rangeCount)throw new d("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ne.selectAllChildren=function(t){se(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},_?ne.setBaseAndExtent=function(e,t,n,r){this.nativeSelection.setBaseAndExtent(e,t,n,r),this.refresh()}:O&&(ne.setBaseAndExtent=function(t,n,r,o){ce(t,n),ce(r,o),se(this,t),se(this,r);var i=e.createRange(node),s=-1==a.comparePoints(t,n,r,o);s?i.setStartAndEnd(r,o,t,n):i.setStartAndEnd(t,n,r,o),this.setSingleRange(i,s)}),ne.deleteFromDocument=function(){if(j&&N&&this.docSelection.type==p){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),a.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,o=n.length;r<o;++r)n[r].deleteContents();this.addRange(n[o-1])}}},ne.eachRange=function(e,t){for(var n=0,r=this._ranges.length;n<r;++n)if(e(this.getRangeAt(n)))return t},ne.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},ne.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ne.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(r){n.push(r[e].apply(r,t||[]))})),n},ne.setStart=le(!0),ne.setEnd=le(!1),e.rangePrototype.select=function(e){ee(this.getDocument()).setSingleRange(this,e)},ne.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ne.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},ne.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ne.moveToBookmark=function(t){for(var n,r,o=[],i=0;n=t.rangeBookmarks[i++];)(r=e.createRange(this.win)).moveToBookmark(n),o.push(r);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},ne.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},ne.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},ne.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(l.toHtml(t))})),e.join("")},h.implementsTextRange&&(ne.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if($(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ne.getName=function(){return"WrappedSelection"},ne.inspect=function(){return ue(this)},ne.detach=function(){Z(this.win,"delete"),J(this)},K.detachAll=function(){Z(null,"deleteAll")},K.inspect=ue,K.isDirectionBackward=y,e.Selection=K,e.selectionPrototype=ne,e.addShimListener((function(e){void 0===e.getSelection&&(e.getSelection=function(){return ee(e)}),e=null}))}));var q=!1,j=function(e){q||(q=!0,!E.initialized&&E.config.autoInitialize&&x())};return b&&("complete"==document.readyState?j():(s(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",j,!1),m(window,"load",j))),E},void 0===(o="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=o)},478:function(e,t,n){var r,o,i;o=[n(755)],r=function(e){return e.createModule("TextRange",["WrappedSelection"],(function(e,t){var n,r,o,i="undefined",a="character",s="word",c=e.dom,l=e.util,u=l.extend,d=l.createOptions,f=c.getBody,h=/^[ \t\f\r\n]+$/,p=/^[ \t\f\r]+$/,v=/^[\t-\r \u0085\u00A0\u1680\u180E\u2000-\u200B\u2028\u2029\u202F\u205F\u3000]+$/,g=/^[\t \u00A0\u1680\u180E\u2000-\u200B\u202F\u205F\u3000]+$/,m="en",y=e.Selection.isDirectionBackward,b=!1,S=!1,E=!0;function w(e,t){var n,r=e.join(""),o=[];function i(e,t,n){o.push({start:e,end:t,isWord:n})}for(var a,s,c=0;n=t.wordRegex.exec(r);){if(s=(a=n.index)+n[0].length,a>c&&i(c,a,!1),t.includeTrailingSpace)for(;g.test(e[s]);)++s;i(a,s,!0),c=s}return c<e.length&&i(c,e.length,!1),o}function C(e,t){for(var n=e.slice(t.start,t.end),r={isWord:t.isWord,chars:n,toString:function(){return n.join("")}},o=0,i=n.length;o<i;++o)n[o].token=r;return r}function N(e,t,n){for(var r,o=n(e,t),i=[],a=0;r=o[a++];)i.push(C(e,r));return i}n=c.createTestElement(document,"<p>1 </p><p></p>",!0),r=n.firstChild,(o=e.getSelection()).collapse(r.lastChild,2),o.setStart(r.firstChild,0),n.innerHTML="1 <br />",o.collapse(n,2),o.setStart(n.firstChild,0),b=1==(""+o).length,n.innerHTML="1 <p>1</p>",o.collapse(n,2),o.setStart(n.firstChild,0),S=1==(""+o).length,c.removeNode(n),o.removeAllRanges();var R={includeBlockContentTrailingSpace:!0,includeSpaceBeforeBr:!0,includeSpaceBeforeBlock:!0,includePreLineTrailingSpace:!0,ignoreCharacters:""};function T(e){var t=e||"",n="string"==typeof t?t.split(""):t;return n.sort((function(e,t){return e.charCodeAt(0)-t.charCodeAt(0)})),n.join("").replace(/(.)\1+/g,"$1")}var k={includeBlockContentTrailingSpace:!E,includeSpaceBeforeBr:!b,includeSpaceBeforeBlock:!S,includePreLineTrailingSpace:!0},x={en:{wordRegex:/[a-z0-9]+('[a-z0-9]+)*/gi,includeTrailingSpace:!1,tokenizer:w}},A={caseSensitive:!1,withinRange:null,wholeWordsOnly:!1,wrap:!1,direction:"forward",wordOptions:null,characterOptions:null},O={wordOptions:null,characterOptions:null},_={wordOptions:null,characterOptions:null,trim:!1,trimStart:!0,trimEnd:!0},L={wordOptions:null,characterOptions:null,direction:"forward"};function P(e){var t,n;return e?(t=e.language||m,u(n={},x[t]||x[m]),u(n,e),n):x[m]}function I(e,t){var n=d(e,t);return t.hasOwnProperty("wordOptions")&&(n.wordOptions=P(n.wordOptions)),t.hasOwnProperty("characterOptions")&&(n.characterOptions=d(n.characterOptions,R)),n}var B,D,q,j=c.getComputedStyleProperty;D=document.createElement("table"),(q=f(document)).appendChild(D),B="block"==j(D,"display"),q.removeChild(D);var M={table:"table",caption:"table-caption",colgroup:"table-column-group",col:"table-column",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",td:"table-cell",th:"table-cell"};function W(e,t){var n=j(e,"display",t),r=e.tagName.toLowerCase();return"block"==n&&B&&M.hasOwnProperty(r)?M[r]:n}function H(e){for(var t=$(e),n=0,r=t.length;n<r;++n)if(1==t[n].nodeType&&"none"==W(t[n]))return!0;return!1}function F(e){var t;return 3==e.nodeType&&(t=e.parentNode)&&"hidden"==j(t,"visibility")}function U(e){return e&&(1==e.nodeType&&!/^(inline(-block|-table)?|none)$/.test(W(e))||9==e.nodeType||11==e.nodeType)}function V(e){return c.isCharacterDataNode(e)||!/^(area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param)$/i.test(e.nodeName)}function z(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}function $(e){return z(e).concat([e])}function G(e){for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null}function X(e,t){return!t&&e.hasChildNodes()?e.firstChild:G(e)}function Y(e){var t=e.previousSibling;if(t){for(e=t;e.hasChildNodes();)e=e.lastChild;return e}var n=e.parentNode;return n&&1==n.nodeType?n:null}function K(e){if(!e||3!=e.nodeType)return!1;var t=e.data;if(""===t)return!0;var n=e.parentNode;if(!n||1!=n.nodeType)return!1;var r=j(e.parentNode,"whiteSpace");return/^[\t\n\r ]+$/.test(t)&&/^(normal|nowrap)$/.test(r)||/^[\t\r ]+$/.test(t)&&"pre-line"==r}function J(e){return""===e.data||!!K(e)&&(!e.parentNode||!!H(e))}function Q(e){var t=e.nodeType;return 7==t||8==t||H(e)||/^(script|style)$/i.test(e.nodeName)||F(e)||J(e)}function Z(e,t){var n=e.nodeType;return 7==n||8==n||1==n&&"none"==W(e,t)}function ee(){this.store={}}function te(e,t,n){return function(r){var o=this.cache;if(o.hasOwnProperty(e))return o[e];var i=t.call(this,n?this[n]:this,r);return o[e]=i,i}}function ne(e,t){this.node=e,this.session=t,this.cache=new ee,this.positions=new ee}ee.prototype={get:function(e){return this.store.hasOwnProperty(e)?this.store[e]:null},set:function(e,t){return this.store[e]=t}};var re={getPosition:function(e){var t=this.positions;return t.get(e)||t.set(e,new pe(this,e))},toString:function(){return"[NodeWrapper("+c.inspectNode(this.node)+")]"}};ne.prototype=re;var oe="EMPTY",ie="NON_SPACE",ae="UNCOLLAPSIBLE_SPACE",se="COLLAPSIBLE_SPACE",ce="TRAILING_SPACE_BEFORE_BLOCK",le="TRAILING_SPACE_IN_BLOCK",ue="TRAILING_SPACE_BEFORE_BR",de="PRE_LINE_TRAILING_SPACE_BEFORE_LINE_BREAK",fe="TRAILING_LINE_BREAK_AFTER_BR",he="INCLUDED_TRAILING_LINE_BREAK_AFTER_BR";function pe(e,t){this.offset=t,this.nodeWrapper=e,this.node=e.node,this.session=e.session,this.cache=new ee}function ve(){return"[Position("+c.inspectNode(this.node)+":"+this.offset+")]"}u(re,{isCharacterDataNode:te("isCharacterDataNode",c.isCharacterDataNode,"node"),getNodeIndex:te("nodeIndex",c.getNodeIndex,"node"),getLength:te("nodeLength",c.getNodeLength,"node"),containsPositions:te("containsPositions",V,"node"),isWhitespace:te("isWhitespace",K,"node"),isCollapsedWhitespace:te("isCollapsedWhitespace",J,"node"),getComputedDisplay:te("computedDisplay",W,"node"),isCollapsed:te("collapsed",Q,"node"),isIgnored:te("ignored",Z,"node"),next:te("nextPos",X,"node"),previous:te("previous",Y,"node"),getTextNodeInfo:te("textNodeInfo",(function(e){var t=null,n=!1,r=j(e.parentNode,"whiteSpace"),o="pre-line"==r;return o?(t=p,n=!0):"normal"!=r&&"nowrap"!=r||(t=h,n=!0),{node:e,text:e.data,spaceRegex:t,collapseSpaces:n,preLine:o}}),"node"),hasInnerText:te("hasInnerText",(function(e,t){for(var n=this.session,r=n.getPosition(e.parentNode,this.getNodeIndex()+1),o=n.getPosition(e,0),i=t?r:o,a=t?o:r;i!==a;){if(i.prepopulateChar(),i.isDefinitelyNonEmpty())return!0;i=t?i.previousVisible():i.nextVisible()}return!1}),"node"),isRenderedBlock:te("isRenderedBlock",(function(e){for(var t=e.getElementsByTagName("br"),n=0,r=t.length;n<r;++n)if(!Q(t[n]))return!0;return this.hasInnerText()}),"node"),getTrailingSpace:te("trailingSpace",(function(e){if("br"==e.tagName.toLowerCase())return"";switch(this.getComputedDisplay()){case"inline":for(var t=e.lastChild;t;){if(!Z(t))return 1==t.nodeType?this.session.getNodeWrapper(t).getTrailingSpace():"";t=t.previousSibling}break;case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":break;case"table-cell":return"\t";default:return this.isRenderedBlock(!0)?"\n":""}return""}),"node"),getLeadingSpace:te("leadingSpace",(function(e){switch(this.getComputedDisplay()){case"inline":case"inline-block":case"inline-table":case"none":case"table-column":case"table-column-group":case"table-cell":break;default:return this.isRenderedBlock(!1)?"\n":""}return""}),"node")});var ge={character:"",characterType:oe,isBr:!1,prepopulateChar:function(){var e=this;if(!e.prepopulatedChar){var t=e.node,n=e.offset,r="",o=oe,i=!1;if(n>0)if(3==t.nodeType){var a=t.data,s=a.charAt(n-1),c=e.nodeWrapper.getTextNodeInfo(),l=c.spaceRegex;c.collapseSpaces?l.test(s)?n>1&&l.test(a.charAt(n-2))||(c.preLine&&"\n"===a.charAt(n)?(r=" ",o=de):(r=" ",o=se)):(r=s,o=ie,i=!0):(r=s,o=ae,i=!0)}else{var u=t.childNodes[n-1];if(u&&1==u.nodeType&&!Q(u)&&("br"==u.tagName.toLowerCase()?(r="\n",e.isBr=!0,o=se,i=!1):e.checkForTrailingSpace=!0),!r){var d=t.childNodes[n];d&&1==d.nodeType&&!Q(d)&&(e.checkForLeadingSpace=!0)}}e.prepopulatedChar=!0,e.character=r,e.characterType=o,e.isCharInvariant=i}},isDefinitelyNonEmpty:function(){var e=this.characterType;return e==ie||e==ae},resolveLeadingAndTrailingSpaces:function(){if(this.prepopulatedChar||this.prepopulateChar(),this.checkForTrailingSpace){var e=this.session.getNodeWrapper(this.node.childNodes[this.offset-1]).getTrailingSpace();e&&(this.isTrailingSpace=!0,this.character=e,this.characterType=se),this.checkForTrailingSpace=!1}if(this.checkForLeadingSpace){var t=this.session.getNodeWrapper(this.node.childNodes[this.offset]).getLeadingSpace();t&&(this.isLeadingSpace=!0,this.character=t,this.characterType=se),this.checkForLeadingSpace=!1}},getPrecedingUncollapsedPosition:function(e){for(var t=this;t=t.previousVisible();)if(""!==t.getCharacter(e))return t;return null},getCharacter:function(e){this.resolveLeadingAndTrailingSpaces();var t=this.character,n=T(e.ignoreCharacters),r=""!==t&&n.indexOf(t)>-1;if(this.isCharInvariant)return r?"":t;var o=["character",e.includeSpaceBeforeBr,e.includeBlockContentTrailingSpace,e.includePreLineTrailingSpace,n].join("_"),i=this.cache.get(o);if(null!==i)return i;var a,s,c="",l=this.characterType==se,u=!1,d=this;function f(){return u||(s=d.getPrecedingUncollapsedPosition(e),u=!0),s}return l&&(this.type==he?c="\n":" "==t&&(!f()||s.isTrailingSpace||"\n"==s.character||" "==s.character&&s.characterType==se)||("\n"==t&&this.isLeadingSpace?f()&&"\n"!=s.character&&(c="\n"):(a=this.nextUncollapsed())&&(a.isBr?this.type=ue:a.isTrailingSpace&&"\n"==a.character?this.type=le:a.isLeadingSpace&&"\n"==a.character&&(this.type=ce),"\n"==a.character?(this.type!=ue||e.includeSpaceBeforeBr)&&(this.type!=ce||e.includeSpaceBeforeBlock)&&(this.type==le&&a.isTrailingSpace&&!e.includeBlockContentTrailingSpace||(this.type!=de||a.type!=ie||e.includePreLineTrailingSpace)&&("\n"==t?a.isTrailingSpace?this.isTrailingSpace||this.isBr&&(a.type=fe,f()&&s.isLeadingSpace&&!s.isTrailingSpace&&"\n"==s.character?a.character="":a.type=he):c="\n":" "==t&&(c=" "))):c=t))),n.indexOf(c)>-1&&(c=""),this.cache.set(o,c),c},equals:function(e){return!!e&&this.node===e.node&&this.offset===e.offset},inspect:ve,toString:function(){return this.character}};pe.prototype=ge,u(ge,{next:te("nextPos",(function(e){var t,n,r,o=e.nodeWrapper,i=e.node,a=e.offset,s=o.session;return i?(a==o.getLength()?n=(t=i.parentNode)?o.getNodeIndex()+1:0:o.isCharacterDataNode()?(t=i,n=a+1):(r=i.childNodes[a],s.getNodeWrapper(r).containsPositions()?(t=r,n=0):(t=i,n=a+1)),t?s.getPosition(t,n):null):null})),previous:te("previous",(function(e){var t,n,r,o=e.nodeWrapper,i=e.node,a=e.offset,s=o.session;return 0==a?n=(t=i.parentNode)?o.getNodeIndex():0:o.isCharacterDataNode()?(t=i,n=a-1):(r=i.childNodes[a-1],s.getNodeWrapper(r).containsPositions()?(t=r,n=c.getNodeLength(r)):(t=i,n=a-1)),t?s.getPosition(t,n):null})),nextVisible:te("nextVisible",(function(e){var t=e.next();if(!t)return null;var n=t.nodeWrapper,r=t.node,o=t;return n.isCollapsed()&&(o=n.session.getPosition(r.parentNode,n.getNodeIndex()+1)),o})),nextUncollapsed:te("nextUncollapsed",(function(e){for(var t=e;t=t.nextVisible();)if(t.resolveLeadingAndTrailingSpaces(),""!==t.character)return t;return null})),previousVisible:te("previousVisible",(function(e){var t=e.previous();if(!t)return null;var n=t.nodeWrapper,r=t.node,o=t;return n.isCollapsed()&&(o=n.session.getPosition(r.parentNode,n.getNodeIndex())),o}))});var me=null,ye=function(){function e(e){var t=new ee;return{get:function(n){var r=t.get(n[e]);if(r)for(var o,i=0;o=r[i++];)if(o.node===n)return o;return null},set:function(n){var r=n.node[e];(t.get(r)||t.set(r,[])).push(n)}}}var t=l.isHostProperty(document.documentElement,"uniqueID");function n(){this.initCaches()}return n.prototype={initCaches:function(){var n;this.elementCache=t?(n=new ee,{get:function(e){return n.get(e.uniqueID)},set:function(e){n.set(e.node.uniqueID,e)}}):e("tagName"),this.textNodeCache=e("data"),this.otherNodeCache=e("nodeName")},getNodeWrapper:function(e){var t;switch(e.nodeType){case 1:t=this.elementCache;break;case 3:t=this.textNodeCache;break;default:t=this.otherNodeCache}var n=t.get(e);return n||(n=new ne(e,this),t.set(n)),n},getPosition:function(e,t){return this.getNodeWrapper(e).getPosition(t)},getRangeBoundaryPosition:function(e,t){var n=t?"start":"end";return this.getPosition(e[n+"Container"],e[n+"Offset"])},detach:function(){this.elementCache=this.textNodeCache=this.otherNodeCache=null}},n}();function be(){return Ee(),me=new ye}function Se(){return me||be()}function Ee(){me&&me.detach(),me=null}function we(e,n,r,o){r&&(n?Q(r.node)&&(r=e.previousVisible()):Q(r.node)&&(r=r.nextVisible()));var i=e,a=!1;function s(){var e=null;return n?(e=i,a||(i=i.previousVisible(),a=!i||r&&i.equals(r))):a||(e=i=i.nextVisible(),a=!i||r&&i.equals(r)),a&&(i=null),e}var c,l=!1;return{next:function(){if(l)return l=!1,c;for(var e;e=s();)if(e.getCharacter(o))return c=e,e;return null},rewind:function(){if(!c)throw t.createError("createCharacterIterator: cannot rewind. Only one position can be rewound.");l=!0},dispose:function(){e=r=null}}}u(c,{nextNode:X,previousNode:Y});var Ce=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1};function Ne(e,t,n){var r=we(e,!1,null,t),o=we(e,!0,null,t),i=n.tokenizer;function a(e){for(var t,n,i=[],a=e?r:o,s=!1,c=!1;t=a.next();){if(n=t.character,v.test(n))c&&(c=!1,s=!0);else{if(s){a.rewind();break}c=!0}i.push(t)}return i}var s=a(!0),c=a(!1).reverse(),l=N(c.concat(s),n,i),u=s.length?l.slice(Ce(l,s[0].token)):[],d=c.length?l.slice(0,Ce(l,c.pop().token)+1):[];return{nextEndToken:function(){for(var e,t;1==u.length&&!(e=u[0]).isWord&&(t=a(!0)).length>0;)u=N(e.chars.concat(t),n,i);return u.shift()},previousStartToken:function(){for(var e,t;1==d.length&&!(e=d[0]).isWord&&(t=a(!1)).length>0;)d=N(t.reverse().concat(e.chars),n,i);return d.pop()},dispose:function(){r.dispose(),o.dispose(),u=d=null}}}function Re(e,t,n,r,o){var i,c,l,u,d=0,f=e,h=Math.abs(n);if(0!==n){var p=n<0;switch(t){case a:for(c=we(e,p,null,r);(i=c.next())&&d<h;)++d,f=i;l=i,c.dispose();break;case s:for(var v=Ne(e,r,o),g=p?v.previousStartToken:v.nextEndToken;(u=g())&&d<h;)u.isWord&&(++d,f=p?u.chars[0]:u.chars[u.chars.length-1]);break;default:throw new Error("movePositionBy: unit '"+t+"' not implemented")}p?(f=f.previousVisible(),d=-d):f&&f.isLeadingSpace&&!f.isTrailingSpace&&(t==s&&(l=(c=we(e,!1,null,r)).next(),c.dispose()),l&&(f=l.previousVisible()))}return{position:f,unitsMoved:d}}function Te(e,t,n,r){var o=e.getRangeBoundaryPosition(t,!0),i=e.getRangeBoundaryPosition(t,!1);return we(r?i:o,!!r,r?o:i,n)}function ke(e,t,n){for(var r,o=[],i=Te(e,t,n);r=i.next();)o.push(r);return i.dispose(),o}function xe(t,n,r){var o=e.createRange(t.node);return o.setStartAndEnd(t.node,t.offset,n.node,n.offset),!o.expand("word",{wordOptions:r})}function Ae(e,t,n,r,o){var i,a,s,c,l,u,d=y(o.direction),f=we(e,d,e.session.getRangeBoundaryPosition(r,d),o.characterOptions),h="",p=[],v=null;function g(e,t){var n=p[e].previousVisible(),r=p[t-1];return{startPos:n,endPos:r,valid:!o.wholeWordsOnly||xe(n,r,o.wordOptions)}}for(;i=f.next();)if(a=i.character,n||o.caseSensitive||(a=a.toLowerCase()),d?(p.unshift(i),h=a+h):(p.push(i),h+=a),n){if(l=t.exec(h))if(c=(s=l.index)+l[0].length,u){if(!d&&c<h.length||d&&s>0){v=g(s,c);break}}else u=!0}else if(-1!=(s=h.indexOf(t))){v=g(s,s+t.length);break}return u&&(v=g(s,c)),f.dispose(),v}function Oe(e){return function(){var t=!!me,n=[Se()].concat(l.toArray(arguments)),r=e.apply(this,n);return t||Ee(),r}}function _e(e,t){return Oe((function(n,r,o,s){typeof o==i&&(o=r,r=a),s=I(s,O);var c=e;t&&(c=o>=0,this.collapse(!c));var l=Re(n.getRangeBoundaryPosition(this,c),r,o,s.characterOptions,s.wordOptions),u=l.position;return this[c?"setStart":"setEnd"](u.node,u.offset),l.unitsMoved}))}function Le(e){return Oe((function(t,n){for(var r,o=Te(t,this,n=d(n,R),!e),i=0;(r=o.next())&&v.test(r.character);)++i;o.dispose();var a=i>0;return a&&this[e?"moveStart":"moveEnd"]("character",e?i:-i,{characterOptions:n}),a}))}function Pe(e){return Oe((function(t,n){var r=!1;return this.changeEachRange((function(t){r=t[e](n)||r})),r}))}u(e.rangePrototype,{moveStart:_e(!0,!1),moveEnd:_e(!1,!1),move:_e(!0,!0),trimStart:Le(!0),trimEnd:Le(!1),trim:Oe((function(e,t){var n=this.trimStart(t),r=this.trimEnd(t);return n||r})),expand:Oe((function(e,t,n){var r=!1,o=(n=I(n,_)).characterOptions;if(t||(t=a),t==s){var i,c,l=n.wordOptions,u=e.getRangeBoundaryPosition(this,!0),d=e.getRangeBoundaryPosition(this,!1),f=Ne(u,o,l).nextEndToken(),h=f.chars[0].previousVisible();return c=(i=this.collapsed?f:Ne(d,o,l).previousStartToken()).chars[i.chars.length-1],h.equals(u)||(this.setStart(h.node,h.offset),r=!0),c&&!c.equals(d)&&(this.setEnd(c.node,c.offset),r=!0),n.trim&&(n.trimStart&&(r=this.trimStart(o)||r),n.trimEnd&&(r=this.trimEnd(o)||r)),r}return this.moveEnd(a,1,n)})),text:Oe((function(e,t){return this.collapsed?"":ke(e,this,d(t,R)).join("")})),selectCharacters:Oe((function(e,t,n,r,o){var i={characterOptions:o};t||(t=f(this.getDocument())),this.selectNodeContents(t),this.collapse(!0),this.moveStart("character",n,i),this.collapse(!0),this.moveEnd("character",r-n,i)})),toCharacterRange:Oe((function(e,t,n){t||(t=f(this.getDocument()));var r,o=t.parentNode,i=c.getNodeIndex(t),a=-1==c.comparePoints(this.startContainer,this.endContainer,o,i),s=this.cloneRange();return a?(s.setStartAndEnd(this.startContainer,this.startOffset,o,i),r=-s.text(n).length):(s.setStartAndEnd(o,i,this.startContainer,this.startOffset),r=s.text(n).length),{start:r,end:r+this.text(n).length}})),findText:Oe((function(t,n,r){(r=I(r,A)).wholeWordsOnly&&(r.wordOptions.includeTrailingSpace=!1);var o=y(r.direction),i=r.withinRange;i||(i=e.createRange()).selectNodeContents(this.getDocument());var a=n,s=!1;"string"==typeof a?r.caseSensitive||(a=a.toLowerCase()):s=!0;var c=t.getRangeBoundaryPosition(this,!o),l=i.comparePoint(c.node,c.offset);-1===l?c=t.getRangeBoundaryPosition(i,!0):1===l&&(c=t.getRangeBoundaryPosition(i,!1));for(var u,d=c,f=!1;;)if(u=Ae(d,a,s,i,r)){if(u.valid)return this.setStartAndEnd(u.startPos.node,u.startPos.offset,u.endPos.node,u.endPos.offset),!0;d=o?u.startPos:u.endPos}else{if(!r.wrap||f)return!1;i=i.cloneRange(),d=t.getRangeBoundaryPosition(i,!o),i.setBoundary(c.node,c.offset,o),f=!0}})),pasteHtml:function(e){if(this.deleteContents(),e){var t=this.createContextualFragment(e),n=t.lastChild;this.insertNode(t),this.collapseAfter(n)}}}),u(e.selectionPrototype,{expand:Oe((function(e,t,n){this.changeEachRange((function(e){e.expand(t,n)}))})),move:Oe((function(e,t,n,r){var o=0;if(this.focusNode){this.collapse(this.focusNode,this.focusOffset);var i=this.getRangeAt(0);r||(r={}),r.characterOptions=d(r.characterOptions,k),o=i.move(t,n,r),this.setSingleRange(i)}return o})),trimStart:Pe("trimStart"),trimEnd:Pe("trimEnd"),trim:Pe("trim"),selectCharacters:Oe((function(t,n,r,o,i,a){var s=e.createRange(n);s.selectCharacters(n,r,o,a),this.setSingleRange(s,i)})),saveCharacterRanges:Oe((function(e,t,n){for(var r=this.getAllRanges(),o=[],i=1==r.length&&this.isBackward(),a=0,s=r.length;a<s;++a)o[a]={characterRange:r[a].toCharacterRange(t,n),backward:i,characterOptions:n};return o})),restoreCharacterRanges:Oe((function(t,n,r){this.removeAllRanges();for(var o,i,a,s=0,c=r.length;s<c;++s)a=(i=r[s]).characterRange,(o=e.createRange(n)).selectCharacters(n,a.start,a.end,i.characterOptions),this.addRange(o,i.backward)})),text:Oe((function(e,t){for(var n=[],r=0,o=this.rangeCount;r<o;++r)n[r]=this.getRangeAt(r).text(t);return n.join("")}))}),e.innerText=function(t,n){var r=e.createRange(t);return r.selectNodeContents(t),r.text(n)},e.createWordIterator=function(e,t,n){var r=Se();n=I(n,L);var o=Ne(r.getPosition(e,t),n.characterOptions,n.wordOptions),i=y(n.direction);return{next:function(){return i?o.previousStartToken():o.nextEndToken()},dispose:function(){o.dispose(),this.next=function(){}}}},e.noMutation=function(e){e(Se()),Ee()},e.noMutation.createEntryPointFunction=Oe,e.textRange={isBlockNode:U,isCollapsedWhitespaceNode:J,createPosition:Oe((function(e,t,n){return e.getPosition(t,n)}))}})),e},void 0===(i="function"==typeof r?r.apply(t,o):r)||(e.exports=i)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=document.createElement("div");return n.innerHTML=e,t?n:n.firstChild}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}var i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"get",value:function(e){return new Promise((function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(JSON.parse(r.responseText)):n(r.statusText))},r.onerror=function(){n("Network error")},r.send()}))}},{key:"post",value:function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)n(JSON.parse(o.responseText));else{var e=JSON.parse(o.responseText);r(e.error||o.statusText)}},o.onerror=function(){r("Network error")},o.send(JSON.stringify(t))}))}},{key:"postFormData",value:function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?n(JSON.parse(o.responseText)):r(o.statusText))},o.onerror=function(){r("Network error")},o.send(t)}))}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}var l=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=document.getElementById("pb-layout-add"),this.window.querySelector(".close").addEventListener("click",(function(){return t.close()}))},(t=[{key:"open",value:function(){this.window.classList.add("opened")}},{key:"close",value:function(){this.window.classList.remove("opened")}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var h=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.window=document.getElementById("pb-block-add"),this.window.querySelector(".close").addEventListener("click",(function(){return t.close()}))},(t=[{key:"open",value:function(){this.window.classList.add("opened")}},{key:"close",value:function(){this.window.classList.remove("opened")}}])&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),p=n(755),v=n.n(p);n(91),n(478);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var b=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.savedRange=null},(t=[{key:"init",value:function(){v().init(),this.initButtons()}},{key:"handleTextOptions",value:function(e){var t=this;e.querySelectorAll('[contenteditable="true"][data-text-options="true"]').forEach((function(e){e.addEventListener("mouseup",(function(e){var n=v().getSelection();if(n.toString().length>0){var r=e.clientX,o=e.clientY;t.showContextMenu(r,o),t.savedRange=n.getRangeAt(0)}}))})),document.addEventListener("click",(function(e){window.getSelection().toString().length<=0&&t.hideContextMenu()}))}},{key:"initButtons",value:function(){var e=this,t=v().createClassApplier("bold",{elementTagName:"b"}),n=v().createClassApplier("url",{elementTagName:"a",elementProperties:{href:""}});document.getElementById("boldOption").addEventListener("click",(function(){e.savedRange&&(v().getSelection().setSingleRange(e.savedRange),t.toggleSelection(),e.hideContextMenu())})),document.getElementById("linkOption").addEventListener("click",(function(){if(e.savedRange){var t=prompt("Enter the URL");t&&(v().getSelection().setSingleRange(e.savedRange),n.elementProperties.href=t,n.toggleSelection(),e.hideContextMenu())}}))}},{key:"hideContextMenu",value:function(){document.getElementById("textOptions").style.display="none"}},{key:"showContextMenu",value:function(){var e=v().getSelection().nativeSelection;if(e&&!e.isCollapsed){var t=e.getRangeAt(0).getBoundingClientRect(),n=document.getElementById("textOptions");n.style.position="fixed",n.style.top="".concat(t.top-50,"px"),n.style.left="".concat(t.left,"px"),n.style.display="flex"}}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var R=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blocks=t,this.root=document.getElementById("pagebuilder-root"),this.data={},this.data.pageId=pageId,this.data.pageType=pageType},(t=[{key:"collect",value:function(){var e=this.root.querySelectorAll(".pb__layout-container");return this.data.data=this.collectData(e),this.data}},{key:"collectData",value:function(e){var t=[];if(e){var n,r=E(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=o.id,a=o.getAttribute("data-layout"),s=this.collectColumns(o);t.push({id:i,name:a,columns:s})}}catch(e){r.e(e)}finally{r.f()}return t}}},{key:"collectColumns",value:function(e){var t=this,n=[];return e.querySelectorAll(".pb__column").forEach((function(e){var r=e.id,o=t.collectBlocks(e);n.push({id:r,blocks:o})})),n}},{key:"collectBlocks",value:function(e){var t=this,n=[];return e.querySelectorAll(".pb__block").forEach((function(e){var r=t.blocks[e.id],o=r.getData();o&&n.push({id:r.id,name:r.name,data:o})})),n}}])&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(){A=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:k(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",v="completed",g={};function m(){}function y(){}function b(){}var S={};l(S,a,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(P([])));w&&w!==n&&r.call(w,a)&&(S=w);var C=b.prototype=m.prototype=Object.create(S);function N(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,i,a,s){var c=d(e[o],e,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==T(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=x(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=d(t,n,r);if("normal"===l.type){if(o=r.done?v:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=v,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(T(t)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},N(R.prototype),l(R.prototype,s,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new R(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},N(C),l(C,c,"Generator"),l(C,a,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function O(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){O(i,r,o,a,s,"next",e)}function s(e){O(i,r,o,a,s,"throw",e)}a(void 0)}))}}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}var I=function(){return t=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentContainer=document.getElementById("pb-content"),this.bottomLayoutButton=document.getElementById("pb-bottom-add"),this.layoutButtons=document.querySelectorAll("#pb-layout-add .pb__layout-button"),this.blockButtons=document.querySelectorAll("#pb-block-add .pb__layout-button"),this.layoutWindow=new l,this.blockWindow=new h,this.currentCol=null,this.content=[],this.registeredBlocks=t,this.textOptions=new b,this.textOptions.init(),this.selectedBlock=null,this.activeLayout=null,this.blocks={},this.init()},n=[{key:"init",value:function(){var e=this;document.addEventListener("click",(function(e){document.getElementById("blockTools").style.display="none",document.getElementById("layoutTools").style.display="none"})),this.bottomLayoutButton.addEventListener("click",(function(){return e.addLayoutContainer()})),this.layoutButtons.forEach((function(t){var n=t.getAttribute("data-name");t.addEventListener("click",(function(){return e.addLayout(n)}))})),this.blockButtons.forEach((function(t){var n=t.getAttribute("data-name");t.addEventListener("click",(function(){return e.addBlock(n,e.currentCol)}))})),document.getElementById("pb-save").addEventListener("click",(function(){return e.save()})),this.initBlockToolbar(),this.initLayoutToolbar(),pageData.length&&this.loadData()}},{key:"initBlockToolbar",value:function(){var e=this;document.getElementById("blockUp").addEventListener("click",(function(){return e.blockUp()})),document.getElementById("blockDown").addEventListener("click",(function(){return e.blockDown()})),document.getElementById("blockDelete").addEventListener("click",(function(){return e.blockDelete()}))}},{key:"initLayoutToolbar",value:function(){var e=this;document.getElementById("layoutUp").addEventListener("click",(function(){return e.layoutUp()})),document.getElementById("layoutDown").addEventListener("click",(function(){return e.layoutDown()})),document.getElementById("layoutDelete").addEventListener("click",(function(){return e.layoutDelete()}))}},{key:"addLayoutContainer",value:function(){this.layoutWindow.open()}},{key:"addLayout",value:(c=_(A().mark((function t(n){var r,o,a,s,c=this,l=arguments;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:null,o=new i,t.next=4,o.get("/pagebuilder/layout?layout="+n);case 4:a=t.sent,(s=e(a.template,!1)).setAttribute("data-layout",n),this.contentContainer.append(s),this.layoutWindow.close(),this.addBlockButtonEventHandler(),this.registerLayout(a.id),document.addEventListener("click",(function(e){return c.handleLayoutFocus(e,s)})),s.click(),r&&this.processLayoutData(s,r);case 14:case"end":return t.stop()}}),t,this)}))),function(e){return c.apply(this,arguments)})},{key:"addBlock",value:(s=_(A().mark((function e(t,n){var r,o,a,s,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:null,o=new i,e.next=4,o.get("/pagebuilder/block?name="+t);case 4:a=e.sent,this.renderBlock(a,n),s=new this.registeredBlocks[t](a.block,t),r&&s.setData(r),this.blocks[s.id]=s,this.blockWindow.close();case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"renderBlock",value:function(t,n){var r=this,o=e(t.template,!1);o.classList.add("pb__block");var i=n.querySelector(".col-content");this.textOptions.handleTextOptions(o),i.append(o),document.addEventListener("click",(function(e){return r.handleFocus(e,o)})),o.click()}},{key:"addBlockButtonEventHandler",value:function(){var e=this;document.querySelectorAll('[data-action="block-add"]').forEach((function(t){t.addEventListener("click",(function(){return e.openBlockWindow(t)}))}))}},{key:"openBlockWindow",value:function(e){var t=e.closest(".col").getAttribute("id");e.closest(".pb__layout-container").getAttribute("id"),this.currentCol=document.getElementById(t),this.blockWindow.open()}},{key:"getColumn",value:function(e,t){var n=this.content.find((function(t){return t.id===e}));if(n){var r=n.columns.find((function(e){return e.id===t}));if(r)return r;console.error("Column with id ".concat(t," not found in container ").concat(e))}else console.error("Container with id ".concat(e," not found"))}},{key:"registerLayout",value:function(e){var t={};t.id=e,t.columns=[],document.getElementById(e).querySelectorAll(".pb__column").forEach((function(e){var n={id:e.getAttribute("id"),blocks:[]};t.columns.push(n)})),this.content.push(t)}},{key:"handleFocus",value:function(e,t){t.contains(e.target)?(t.classList.remove("not-focused"),t.classList.add("focused"),this.selectedBlock=t,this.showBlockToolbar()):(t.classList.add("not-focused"),t.classList.remove("focused"))}},{key:"handleLayoutFocus",value:function(e,t){t.contains(e.target)?(this.activeLayout=t,t.classList.add("active"),this.showLayoutToolbar()):t.classList.remove("active")}},{key:"showBlockToolbar",value:function(){var e=document.getElementById("blockTools");if(this.selectedBlock)return this.selectedBlock.prepend(e),void(e.style.display="flex");e.style.display="none"}},{key:"showLayoutToolbar",value:function(){var e=document.getElementById("layoutTools");if(this.activeLayout)return this.activeLayout.prepend(e),void(e.style.display="flex");e.style.display="none"}},{key:"blockUp",value:function(){if(this.selectedBlock){var e=this.selectedBlock.previousSibling;e&&this.selectedBlock.closest(".col-content").insertBefore(this.selectedBlock,e)}}},{key:"blockDown",value:function(){if(this.selectedBlock){var e=this.selectedBlock.nextSibling;e&&(t=this.selectedBlock,(n=e).parentNode.insertBefore(t,n.nextSibling))}var t,n}},{key:"blockDelete",value:function(){var e=document.getElementById("blockTools");e.style.display="none",document.querySelector("body").append(e),this.selectedBlock.remove()}},{key:"layoutUp",value:function(){if(this.activeLayout){var e=this.activeLayout.previousSibling;e&&document.getElementById("pb-content").insertBefore(this.activeLayout,e)}}},{key:"layoutDown",value:function(){if(this.selectedBlock){var e=this.activeLayout.nextSibling;e&&(t=this.activeLayout,(n=e).parentNode.insertBefore(t,n.nextSibling))}var t,n}},{key:"layoutDelete",value:function(){var e=document.getElementById("layoutTools"),t=document.getElementById("blockTools");e.style.display="none",t.style.display="none",document.querySelector("body").append(e,t),this.activeLayout.remove()}},{key:"save",value:function(){var e=new R(this.blocks).collect();(new i).post("/pagebuilder/save",e).then((function(){var e=document.createElement("div");e.classList.add("pb__success-message");var t=document.createElement("p");t.innerText="Successfully updated",e.append(t),document.querySelector("body").append(e),setTimeout((function(){e.remove()}),2e3)}))}},{key:"loadData",value:(a=_(A().mark((function e(){var t,n,r,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=k(pageData),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return o=r.value,e.next=8,t.addLayout(o.name,o.columns);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(){return a.apply(this,arguments)})},{key:"processLayoutData",value:function(e,t){for(var n=e.querySelectorAll(".pb__column"),r=0;r<n.length;r++)this.pushColumnData(n[r],t[r])}},{key:"pushColumnData",value:(o=_(A().mark((function e(t,n){var r,o,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=k(n.blocks),e.prev=1,r.s();case 3:if((o=r.n()).done){e.next=9;break}return i=o.value,e.next=7,this.addBlock(i.name,t,i.data);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r.e(e.t0);case 14:return e.prev=14,r.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(e,t){return o.apply(this,arguments)})}],n&&L(t.prototype,n),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,a,s,c}();function B(e){return new Promise((function(t,n){var r=new XMLHttpRequest,o=new FormData;o.append("file",e),r.open("POST","/pagebuilder/upload-image",!0),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(JSON.parse(r.responseText)):n(r.statusText))},r.onerror=function(){n("Network error")},r.send(o)}))}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}var M=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.uploadArea=this.node.querySelector(".pb__image-block_dropzone"),this.fileInput=this.node.querySelector(".pb__image-block_input"),this.preview=this.node.querySelector(".pb__image-block_preview"),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){var e=this;this.uploadArea.addEventListener("click",(function(){e.fileInput.click()})),this.fileInput.addEventListener("change",(function(t){e.handleFiles(t.target.files)})),this.uploadArea.addEventListener("dragover",(function(t){t.preventDefault(),e.uploadArea.classList.add("dragover")})),this.uploadArea.addEventListener("dragleave",(function(){e.uploadArea.classList.remove("dragover")})),this.uploadArea.addEventListener("drop",(function(t){t.preventDefault(),e.uploadArea.classList.remove("dragover"),e.handleFiles(t.dataTransfer.files)}))}},{key:"handleFiles",value:function(e){var t=this,n=e[0];n&&n.type.startsWith("image/")&&B(n).then((function(e){t.showPreview(e.url)}))}},{key:"showPreview",value:function(e){var t=this;this.preview.innerHTML='<img src="'.concat(e,'" alt="Image preview">'),this.uploadArea.style.display="none",this.preview.style.display="block",this.preview.querySelector("img").addEventListener("click",(function(){t.fileInput.click()}))}},{key:"getData",value:function(){var e=this.node.querySelector(".preview img").getAttribute("src");return e.length?{url:e}:null}},{key:"setData",value:function(e){this.showPreview(e.url)}}])&&q(e.prototype,t),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function F(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}var U=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){document.getElementById(this.id).addEventListener("keypress",(function(e){"Enter"===e.key&&(document.execCommand("insertLineBreak"),e.preventDefault())}))}},{key:"getData",value:function(){return{text:this.node.querySelector("p").innerHTML}}},{key:"setData",value:function(e){this.node.querySelector("p").innerHTML=e.text}}])&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$(r.key),r)}}function $(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}var G=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){document.getElementById(this.id).addEventListener("keypress",(function(e){"Enter"===e.key&&(document.execCommand("insertLineBreak"),e.preventDefault())}))}},{key:"getData",value:function(){var e=this.node.querySelector("h2").innerText;return e.length?{text:e}:null}},{key:"setData",value:function(e){this.node.querySelector("h2").innerText=e.text}}])&&z(e.prototype,t),n&&z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function Q(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X(t)?t:t+""}var Z=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".unordered").querySelectorAll("li");return t?(t.forEach((function(t){var n=t.cloneNode(!0);e.push(n.innerText),n.remove()})),e):null}},{key:"setData",value:function(e){var t=this.node.querySelector(".unordered");t.innerHTML="";var n,r=Y(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=document.createElement("li");i.innerHTML=o,t.append(i)}}catch(e){r.e(e)}finally{r.f()}}}])&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function oe(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}var ie=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".ordered").querySelectorAll("li");return t?(t.forEach((function(t){var n=t.cloneNode(!0);e.push(n.innerText),n.remove()})),e):null}},{key:"setData",value:function(e){var t=this.node.querySelector(".ordered");t.innerHTML="";var n,r=te(e);try{for(r.s();!(n=r.n()).done;){var o=n.value,i=document.createElement("li");i.innerHTML=o,t.append(i)}}catch(e){r.e(e)}finally{r.f()}}}])&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:t+""}var le=function(){return t=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.name=n,this.id=t.id,this.node=document.getElementById(this.id),this.handleBlockEvents()},n=[{key:"handleBlockEvents",value:function(){var e=this;document.getElementById(this.data.id).querySelector('[data-action="add-list-item"]').addEventListener("click",(function(){return e.addListItem()}))}},{key:"addListItem",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e(this.data.prototype,!1);t&&(n.querySelector(".caption span").innerText=t.caption,n.querySelector(".text").innerText=t.text),this.node.querySelector(".level-list").append(n)}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".level-list").querySelectorAll("li");return t.length?(t.forEach((function(t){var n=t.querySelector(".caption").innerText,r=t.querySelector(".text").innerText;e.push({caption:n,text:r})})),e):null}},{key:"setData",value:function(e){var t=this;this.node.querySelector(".level-list").innerHTML="",e.forEach((function(e){t.addListItem(e)}))}}],n&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function de(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pe(r.key),r)}}function pe(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ue(t)?t:t+""}var ve=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.name=n,this.id=t.id,this.node=document.getElementById(this.id),this.list=this.node.querySelector(".color-list"),this.handleBlockEvents()},t=[{key:"handleBlockEvents",value:function(){var e=this;this.list.addEventListener("keydown",(function(t){"Enter"===t.key&&(t.preventDefault(),e.insertNewListItem())}))}},{key:"insertNewListItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.createElement("li");t.textContent+="- text";var n=document.createElement("span");n.textContent="Enter",e&&(n.textContent=e.caption,t.textContent=e.text),t.prepend(n),this.list.appendChild(t),this.setCursorInElement(n)}},{key:"setCursorInElement",value:function(e){var t=document.createRange(),n=window.getSelection();t.setStart(e,1),t.collapse(!0),n.removeAllRanges(),n.addRange(t),e.focus()}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".color-list").querySelectorAll("li");return t?(t.forEach((function(t){var n=t.cloneNode(!0),r=n.querySelector("span"),o=r.innerText;r.remove();var i=n.innerText;e.push({caption:o,text:i}),n.remove()})),e):null}},{key:"setData",value:function(e){this.list.innerHTML="";var t,n=de(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.insertNewListItem(r)}}catch(e){n.e(e)}finally{n.f()}}}],t&&he(e.prototype,t),n&&he(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function ye(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}var be=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contextMenu=t},(t=[{key:"open",value:function(e){e.preventDefault();var t=e.clientX,n=e.clientY;this.contextMenu.style.top="".concat(n,"px"),this.contextMenu.style.left="".concat(t,"px"),this.contextMenu.style.display="block"}},{key:"close",value:function(){this.contextMenu.style.display="none"}}])&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ne(r.key),r)}}function Ne(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function Ae(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function _e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function Ie(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.createElement("div");t.classList.add("slide-item");var n=document.createElement("div");n.classList.add("delete"),n.innerText="×",n.addEventListener("click",(function(){return function(e){var t=e.parentElement,n=e.closest(".slider-wrapper");e.remove();var r=t.querySelectorAll(".slide-item");console.log(r.length,n),!r.length&&n&&(console.log("kekekekek"),n.remove())}(t)}));var r,o=function(){var e=document.createElement("div");e.classList.add("slide-item__image-upload");var t=document.createElement("div");t.classList.add("dropzone","pb__image-block_dropzone");var n=document.createElement("div");return n.classList.add("dz-message"),n.innerText="Drop image here or click to upload",t.append(n),e.append(t),e}(),i=((r=document.createElement("div")).classList.add("preview","pb__image-block_preview"),r),a=function(){var e=document.createElement("input");return e.type="file",e.classList.add("pb__image-block_input"),e.style.display="none",e}(),s=function(){var e=document.createElement("div");e.classList.add("text-box");var t=document.createElement("p");t.classList.add("text-box__label"),t.setAttribute("contenteditable","true"),t.innerText="Enter text";var n=document.createElement("p");return n.classList.add("text-box__desc"),n.setAttribute("contenteditable","true"),n.innerText="Enter text",e.append(t,n),e}();return t.append(n,o,i,a,s),function(e){var t=e,n=t.querySelector(".pb__image-block_dropzone"),r=t.querySelector(".pb__image-block_input"),o=t.querySelector(".pb__image-block_preview"),i="";i&&s(i);function a(e){var t=e[0];t&&t.type.startsWith("image/")&&B(t).then((function(e){s(e.url)}))}function s(e){o.innerHTML='<img src="'.concat(e,'" alt="Image preview">'),n.style.display="none",o.style.display="block",o.querySelector("img").addEventListener("click",(function(){r.click()}))}n.addEventListener("click",(function(){r.click()})),r.addEventListener("change",(function(e){a(e.target.files)})),n.addEventListener("dragover",(function(e){e.preventDefault(),n.classList.add("dragover")})),n.addEventListener("dragleave",(function(){n.classList.remove("dragover")})),n.addEventListener("drop",(function(e){e.preventDefault(),n.classList.remove("dragover"),a(e.dataTransfer.files)}))}(t),e&&function(e,t){var n=t.querySelector(".pb__image-block_input"),r=t.querySelector(".pb__image-block_preview"),o=t.querySelector(".pb__image-block_dropzone");t.querySelector(".text-box__label").innerHtml=e.caption,t.querySelector(".text-box__desc").innerHtml=e.text,e.img&&i(e.img);function i(e){r.innerHTML='<img src="'.concat(e,'" alt="Image preview">'),o.style.display="none",r.style.display="block",r.querySelector("img").addEventListener("click",(function(){n.click()}))}}(e,t),t}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function je(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}function Me(e){return Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Me(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}function Fe(e){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fe(e)}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ve(r.key),r)}}function Ve(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}new I({image:M,text:U,h2:G,ul:Z,ol:ie,level_list:le,color_list:ve,table:function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.placeholder="Enter text",this.data=t,this.name=n,this.id=t.id,this.node=document.getElementById(this.id),this.tableContainer=this.node.querySelector(".table-content"),this.table=null,this.columnsCount=2,this.settingsWindow=this.node.querySelector(".pb__table-settings"),this.contextMenu=new be(this.node.querySelector(".table__context-menu")),this.layouts={top:"layout-top",left:"layout-left"},this.alignment={left:"align-left",center:"align-center"},this.style={default:"default",color:"colors-table",bold:"bold"},this.options={layout:this.layouts.top,alignment:this.alignment.left,style:this.style.default},this.selectedCell=null,this.init(),this.handleBlockEvents()},t=[{key:"handleBlockEvents",value:function(){var e=this;this.node.querySelector(".table__add-col").addEventListener("click",(function(){return e.insertColumn()})),this.node.querySelector(".table__add-row").addEventListener("click",(function(){return e.insertRow(e.getColumnsCount())})),document.addEventListener("click",(function(t){return e.handleFocus(t)})),this.node.querySelector(".pb__table-settings-button").addEventListener("click",(function(){return e.toggleSettingsWindow()})),this.node.querySelector(".table__layout-select").addEventListener("change",(function(t){return e.handleLayoutSelect(t.target.value)})),this.node.querySelector(".table__align-select").addEventListener("change",(function(t){return e.handleAlignSelect(t.target.value)})),this.node.querySelector(".table__style-select").addEventListener("change",(function(t){return e.handleStyleSelect(t.target.value)})),this.node.querySelector(".table__delete-col").addEventListener("click",(function(){return e.handleColumnDelete()})),this.node.querySelector(".table__delete-row").addEventListener("click",(function(){return e.handleRowDelete()})),document.addEventListener("click",(function(){return e.contextMenu.close()}))}},{key:"init",value:function(){var e=document.createElement("table");this.node.classList.add("focused"),this.table=e,e.setAttribute("contenteditable",!0),e.classList.add(this.layouts.top),this.tableContainer.append(e),this.insertRow(this.columnsCount)}},{key:"insertRow",value:function(e){for(var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=document.createElement("tr"),o=0;o<e;o++){var i=document.createElement("td");i.setAttribute("data-col-index",o+1),i.innerText=this.placeholder,i.addEventListener("contextmenu",(function(e){return t.handleCellClick(e)})),n&&(i.innerText=n[o]),r.append(i)}this.table.append(r)}},{key:"getColumnsCount",value:function(){return this.table.firstChild?(this.columnsCount=this.table.firstChild.querySelectorAll("td").length,this.columnsCount):0}},{key:"insertColumn",value:function(){var e=this;this.columnsCount+=this.getColumnsCount()+1;var t=this.table.firstChild?parseInt(this.table.firstChild.children.length)+1:1;this.table.querySelectorAll("tr").forEach((function(n){var r=document.createElement("td");r.setAttribute("data-col-index",t),r.innerText=e.placeholder,r.addEventListener("contextmenu",(function(t){return e.handleCellClick(t)})),n.append(r)}))}},{key:"handleFocus",value:function(e){this.node.contains(e.target)?this.node.classList.add("focused"):this.node.classList.remove("focused")}},{key:"toggleSettingsWindow",value:function(){this.settingsWindow.classList.contains("opened")?this.settingsWindow.classList.remove("opened"):this.settingsWindow.classList.add("opened")}},{key:"handleLayoutSelect",value:function(e){var t=this;Object.entries(this.layouts).forEach((function(n){var r=Ee(n,2),o=r[0],i=r[1];o===e?(t.options.layout=o,t.table.classList.add(i)):t.table.classList.remove(i)}))}},{key:"handleAlignSelect",value:function(e){var t=this;Object.entries(this.alignment).forEach((function(n){var r=Ee(n,2),o=r[0],i=r[1];o===e?(t.options.alignment=o,t.table.classList.add(i)):t.table.classList.remove(i)}))}},{key:"handleStyleSelect",value:function(e){var t=this;Object.entries(this.style).forEach((function(n){var r=Ee(n,2),o=r[0],i=r[1];o===e?(t.options.style=o,t.table.classList.add(i)):t.table.classList.remove(i)}))}},{key:"handleCellClick",value:function(e){"td"===e.target.tagName.toLowerCase()?(this.contextMenu.open(e),this.selectedCell=e.target):this.contextMenu.close()}},{key:"handleColumnDelete",value:function(){var e=parseInt(this.selectedCell.getAttribute("data-col-index"));this.table.querySelectorAll("td").forEach((function(t){e===parseInt(t.getAttribute("data-col-index"))&&t.remove()})),this.updateColumnIndexes(),this.contextMenu.close()}},{key:"handleRowDelete",value:function(){this.selectedCell.closest("tr").remove(),this.contextMenu.close()}},{key:"updateColumnIndexes",value:function(){this.table.querySelectorAll("tr").forEach((function(e){var t=0;e.querySelectorAll("td").forEach((function(e){e.setAttribute("data-col-index",++t)}))}))}},{key:"getData",value:function(){var e={};e.options=this.options,e.table=[];var t=this.table.querySelectorAll("tr");return t.length?(t.forEach((function(t){var n=t.querySelectorAll("td");if(n.length){var r=[];n.forEach((function(e){r.push(e.innerText)})),e.table.push(r)}})),e.table.length?e:null):null}},{key:"setData",value:function(e){var t=this;console.log(e),this.table.innerHTML="",e.table.forEach((function(e){t.insertRow(e.length,e)})),this.setOptions(e.options)}},{key:"setOptions",value:function(e){var t=this;this.node.querySelectorAll(".table__layout-select option").forEach((function(n){n.value===e.layout&&(n.selected=!0,t.handleLayoutSelect(e.layout))})),this.node.querySelectorAll(".table__align-select option").forEach((function(n){n.value===e.alignment&&(n.selected=!0,t.handleAlignSelect(e.alignment))})),this.node.querySelectorAll(".table__style-select option").forEach((function(n){n.value===e.style&&(n.selected=!0,t.handleStyleSelect(e.style))}))}}],t&&Ce(e.prototype,t),n&&Ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),faq:function(){return t=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.contextMenu=new be(this.node.querySelector(".pb__context-menu")),this.selectedItem=null,this.handleBlockEvents()},n=[{key:"handleBlockEvents",value:function(){var e=this;document.getElementById(this.data.id).querySelector('[data-action="add-faq-item"]').addEventListener("click",(function(){return e.addListItem()})),this.node.querySelector('[data-action="delete-item"]').addEventListener("click",(function(){return e.handleItemDelete()}))}},{key:"addListItem",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=e(this.data.prototype,!1);r.querySelector(".accordion__item-header--button").addEventListener("click",(function(){return t.handleItemCollapse(r)})),r.addEventListener("contextmenu",(function(e){return t.handleItemRightClick(e)})),n&&(r.querySelector(".faq__question").innerText=n.question,r.querySelector(".accordion__item--content-wrapper p").innerText=n.answer),this.node.querySelector(".accordion").append(r)}},{key:"handleItemCollapse",value:function(e){e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show")}},{key:"handleItemRightClick",value:function(e){e.target.classList.contains("accordion-item")?this.selectedItem=e.target:this.selectedItem=e.target.closest(".accordion__item"),this.contextMenu.open(e)}},{key:"handleItemDelete",value:function(){this.selectedItem&&this.selectedItem.remove(),this.contextMenu.close()}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".faq__items").querySelectorAll(".accordion__item");return t.length?(t.forEach((function(t){var n=t.querySelector(".faq__question").innerText,r=t.querySelector(".accordion__item--content-wrapper p").innerText;e.push({question:n,answer:r})})),e):null}},{key:"setData",value:function(e){var t,n=Te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.addListItem(r)}}catch(e){n.e(e)}finally{n.f()}}}],n&&xe(t.prototype,n),r&&xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}(),gallery:function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id),this.uploadArea=this.node.querySelector(".pb__image-block_dropzone"),this.fileInput=this.node.querySelector(".pb__image-block_input"),this.preview=this.node.querySelector(".pb__image-block_preview"),this.handleBlockEvents()},(t=[{key:"handleBlockEvents",value:function(){var e=this;this.uploadArea.addEventListener("click",(function(){e.fileInput.click()})),this.fileInput.addEventListener("change",(function(t){e.handleFiles(t.target.files)})),this.uploadArea.addEventListener("dragover",(function(t){t.preventDefault(),e.uploadArea.classList.add("dragover")})),this.uploadArea.addEventListener("dragleave",(function(){e.uploadArea.classList.remove("dragover")})),this.uploadArea.addEventListener("drop",(function(t){t.preventDefault(),e.uploadArea.classList.remove("dragover"),e.handleFiles(t.dataTransfer.files)}))}},{key:"handleFiles",value:function(e){var t,n=this,r=_e(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;o&&o.type.startsWith("image/")&&B(o).then((function(e){n.showPreview(e.url)}))}}catch(e){r.e(e)}finally{r.f()}}},{key:"showPreview",value:function(e){var t=this.createPreview(e);this.preview.append(t),this.uploadArea.style.display="none",this.preview.style.display="flex"}},{key:"getTrashIcon",value:function(){return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" version="1.1" id="Capa_1" width="800px" height="800px" viewBox="0 0 485 485" xml:space="preserve">\n<g>\n\t<g>\n\t\t<rect x="67.224" width="350.535" height="71.81"/>\n\t\t<path d="M417.776,92.829H67.237V485h350.537V92.829H417.776z M165.402,431.447h-28.362V146.383h28.362V431.447z M256.689,431.447    h-28.363V146.383h28.363V431.447z M347.97,431.447h-28.361V146.383h28.361V431.447z"/>\n\t</g>\n</g>\n</svg>'}},{key:"createPreview",value:function(e){var t=document.createElement("div");t.classList.add("pb__gallery-img-wrapper");var n=document.createElement("span");n.classList.add("delete"),n.innerHTML=this.getTrashIcon(),n.addEventListener("click",(function(){t.remove()}));var r=document.createElement("img");return r.src=e,t.append(r,n),t}},{key:"getData",value:function(){var e=[],t=this.node.querySelectorAll(".pb__gallery-img-wrapper");return t.length?(t.forEach((function(t){e.push(t.querySelector("img").getAttribute("src"))})),e):null}},{key:"setData",value:function(e){var t,n=_e(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.showPreview(r)}}catch(e){n.e(e)}finally{n.f()}}}])&&Pe(e.prototype,t),n&&Pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),list_slider:function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.name=n,this.id=t.id,this.node=document.getElementById(this.id),this.activeLine=null,this.sliderWindowOverlay=this.node.querySelector(".slider-window-overlay"),this.sliderContent=this.node.querySelector(".sliderWindow .slider-content"),this.handleBlockEvents()},t=[{key:"handleBlockEvents",value:function(){var e=this;this.node.querySelectorAll("li").forEach((function(t){t.addEventListener("click",(function(t){return e.handleLineClick(t)}))})),this.node.querySelector(".add-slider").addEventListener("click",(function(){return e.openSliderWindow()})),this.node.querySelector(".slider__add-slide").addEventListener("click",(function(){return e.addSlide()})),this.sliderWindowOverlay.querySelector(".close").addEventListener("click",(function(){return e.closeSliderWindow()})),this.sliderWindowOverlay.querySelector(".slider__save").addEventListener("click",(function(t){return e.addSlider(t)})),this.node.querySelector(".list-slider").addEventListener("keydown",(function(t){return e.handleEnterKey(t)}))}},{key:"handleLineClick",value:function(e){this.activeLine=e.target}},{key:"addSlider",value:function(e){e.preventDefault();var t=this.activeLine,n=document.createElement("div");n.classList.add("slider-wrapper");var r=document.createElement("div");r.classList.add("ls__slider"),Array.from(this.sliderContent.childNodes).forEach((function(e){r.appendChild(e)})),n.append(r),n.setAttribute("contenteditable","false"),t.append(n),this.closeSliderWindow()}},{key:"openSliderWindow",value:function(){this.sliderWindowOverlay.style.display="flex"}},{key:"closeSliderWindow",value:function(){this.sliderContent.innerHTML="",this.sliderWindowOverlay.style.display="none"}},{key:"addSlide",value:function(){var e=Be();this.sliderContent.append(e)}},{key:"handleEnterKey",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.addListItem())}},{key:"addListItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.node.querySelector(".list-slider"),r=document.createElement("li");if(r.innerHTML="<br>",r.addEventListener("click",(function(t){return e.handleLineClick(t)})),t&&(r.innerHTML=t.text,void 0!==t.slider)){var o=this.loadSlider(t.slider);r.append(o)}n.append(r),this.setCaretAtEnd(r)}},{key:"setCaretAtEnd",value:function(e){var t=document.createRange(),n=window.getSelection();t.setStart(e,e.childNodes.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t),e.focus()}},{key:"getData",value:function(){var e=[],t=this.node.querySelector(".list-slider").querySelectorAll("li");return t.length?(t.forEach((function(t){var n={},r=t.cloneNode(!0),o=r.querySelector(".slider-wrapper");if(o){var i=[];o.querySelectorAll(".slide-item").forEach((function(e){var t=e.querySelector("img"),n=t?t.getAttribute("src"):null,r=e.querySelector(".text-box__label").innerText,o=e.querySelector(".text-box__desc").innerText;i.push({img:n,caption:r,text:o})})),n.slider=i,o.remove()}n.text=r.innerText,e.push(n)})),e):null}},{key:"loadSlider",value:function(e){var t=document.createElement("div");t.classList.add("slider-wrapper");var n=document.createElement("div");return n.classList.add("ls__slider"),e.forEach((function(e){var t=Be(e);n.append(t)})),t.append(n),t.setAttribute("contenteditable","false"),t}},{key:"setData",value:function(e){var t=this;this.node.querySelector(".list-slider").innerHTML="",e.forEach((function(e){t.addListItem(e)}))}}],t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),icon_link:function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.name=n,this.id=t.id,this.node=document.getElementById(this.id),this.linkModal=new be(this.node.querySelector(".link-modal")),this.link=this.node.querySelector(".lc__link"),this.uploadArea=this.node.querySelector(".pb__image-block_dropzone"),this.fileInput=this.node.querySelector(".pb__image-block_input"),this.preview=this.node.querySelector(".pb__image-block_preview"),this.handleBlockEvents()},t=[{key:"handleBlockEvents",value:function(){var e=this;this.node.querySelector(".lc__link").addEventListener("contextmenu",(function(t){return e.handleLinkRightClick(t)})),this.node.querySelector(".link-modal input").addEventListener("keydown",(function(t){return e.handleUrlInput(t)})),this.uploadArea.addEventListener("click",(function(){e.fileInput.click()})),this.fileInput.addEventListener("change",(function(t){e.handleFiles(t.target.files)})),this.uploadArea.addEventListener("dragover",(function(t){t.preventDefault(),e.uploadArea.classList.add("dragover")})),this.uploadArea.addEventListener("dragleave",(function(){e.uploadArea.classList.remove("dragover")})),this.uploadArea.addEventListener("drop",(function(t){t.preventDefault(),e.uploadArea.classList.remove("dragover"),e.handleFiles(t.dataTransfer.files)}))}},{key:"handleFiles",value:function(e){var t=this,n=e[0];n&&n.type.startsWith("image/")&&B(n).then((function(e){t.showPreview(e.url)}))}},{key:"showPreview",value:function(e){var t=this;this.preview.innerHTML='<img src="'.concat(e,'" alt="Image preview">'),this.uploadArea.style.display="none",this.preview.style.display="block",this.preview.querySelector("img").addEventListener("click",(function(){t.fileInput.click()}))}},{key:"handleLinkRightClick",value:function(e){this.linkModal.open(e)}},{key:"handleUrlInput",value:function(e){if("Enter"===e.key){e.preventDefault();var t=e.target.value;this.link.setAttribute("href",t),this.linkModal.close()}}},{key:"getData",value:function(){return{image:this.node.querySelector(".preview img").getAttribute("src"),text:this.node.querySelector(".lc__link").innerText,url:this.node.querySelector(".lc__link").getAttribute("href")}}},{key:"setData",value:function(e){this.showPreview(e.image),this.node.querySelector(".lc__link").innerText=e.text,this.node.querySelector(".link-modal input").value=e.url}}],t&&We(e.prototype,t),n&&We(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),divider:function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.id=t.id,this.name=n,this.node=document.getElementById(this.id)},(t=[{key:"getData",value:function(){return{empty:!0}}}])&&Ue(e.prototype,t),n&&Ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}()})})()})();